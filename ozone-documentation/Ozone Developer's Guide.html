<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="DOD GOSS">
<title>Ozone Developer&#8217;s Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Ozone Developer&#8217;s Guide</h1>
<div class="details">
<span id="author" class="author">DOD GOSS</span><br>
<span id="revnumber">version 8.0.0.0,</span>
<span id="revdate">2019-07-01</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_objectives">1.1. Objectives</a></li>
<li><a href="#_document_scope">1.2. Document Scope</a></li>
<li><a href="#_usage">1.3. Usage</a>
<ul class="sectlevel3">
<li><a href="#_file_references">1.3.1. File References</a></li>
<li><a href="#_example_code">1.3.2. Example Code</a></li>
</ul>
</li>
<li><a href="#_additional_notes">1.4. Additional Notes</a>
<ul class="sectlevel3">
<li><a href="#_terminology_changes">1.4.1. Terminology Changes</a></li>
<li><a href="#_warnings">1.4.2. Warnings</a></li>
</ul>
</li>
<li><a href="#_related_documents">1.5. Related Documents</a></li>
</ul>
</li>
<li><a href="#creating-a-widget">2. Creating a Widget</a>
<ul class="sectlevel2">
<li><a href="#_overview">2.1. Overview</a></li>
<li><a href="#_tutorial">2.2. Tutorial</a></li>
<li><a href="#_additional_considerations">2.3. Additional Considerations</a>
<ul class="sectlevel3">
<li><a href="#_utility_js_api">2.3.1. Utility JS API</a></li>
<li><a href="#_best_practices">2.3.2. Best Practices</a></li>
<li><a href="#_owf_bundled_javascript">2.3.3. OWF Bundled JavaScript</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#add-a-widget">3. Adding a Widget to OWF</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">3.1. Overview</a></li>
<li><a href="#_tutorial_2">3.2. Tutorial</a>
<ul class="sectlevel3">
<li><a href="#creating-descriptors">3.2.1. Creating Descriptor Files for Widgets</a></li>
<li><a href="#_sharing_descriptor_files">3.2.2. Sharing Descriptor Files</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_eventing_api">4. Eventing API</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">4.1. Overview</a></li>
<li><a href="#_tutorial_3">4.2. Tutorial</a></li>
<li><a href="#_additional_considerations_2">4.3. Additional Considerations</a>
<ul class="sectlevel3">
<li><a href="#_channel_conventions">4.3.1. Channel Conventions</a></li>
<li><a href="#_payload_conventions_json_encoding">4.3.2. Payload Conventions: JSON Encoding</a></li>
<li><a href="#_payload_conventions_restful_data_uris">4.3.3. Payload Conventions: RESTful Data URIs</a></li>
<li><a href="#_eventing_api_enhancements">4.3.4. Eventing API Enhancements</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_preferences_api">5. Preferences API</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">5.1. Overview</a></li>
<li><a href="#_tutorial_4">5.2. Tutorial</a></li>
<li><a href="#_preferences_api_reference">5.3. Preferences API Reference</a></li>
<li><a href="#_additional_considerations_3">5.4. Additional Considerations</a>
<ul class="sectlevel3">
<li><a href="#_preference_naming_conventions">5.4.1. Preference Naming Conventions</a></li>
<li><a href="#_payload_conventions_json_encoding_2">5.4.2. Payload Conventions: JSON Encoding</a></li>
<li><a href="#_payload_conventions_restful_data_uris_2">5.4.3. Payload Conventions: RESTful Data URIs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_launcher_api">6. Launcher API</a>
<ul class="sectlevel2">
<li><a href="#_overview_5">6.1. Overview</a></li>
<li><a href="#_tutorial_5">6.2. Tutorial</a></li>
<li><a href="#_additional_considerations_4">6.3. Additional Considerations</a>
<ul class="sectlevel3">
<li><a href="#find-a-widget">6.3.1. Alternative Ways to Find a Widget GUID</a>
<ul class="sectlevel4">
<li><a href="#_storing_a_widget_guid_as_a_preference">6.3.1.1. Storing a Widget GUID as a Preference</a></li>
<li><a href="#_find_a_widget_by_its_universal_name">6.3.1.2. Find a Widget by its Universal Name</a></li>
</ul>
</li>
<li><a href="#_using_regular_expression_to_change_a_widget_title">6.3.2. Using Regular Expression to Change a Widget Title</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_intents_api">7. Intents API</a></li>
<li><a href="#_remote_procedure_call_rpc_api">8. Remote Procedure Call (RPC) API</a>
<ul class="sectlevel2">
<li><a href="#_overview_6">8.1. Overview</a></li>
<li><a href="#_tutorial_6">8.2. Tutorial</a></li>
</ul>
</li>
<li><a href="#_chrome_api_unsupported">9. Chrome API (Unsupported)</a></li>
<li><a href="#_drag_drop_api_unsupported">10. Drag &amp; Drop API (Unsupported)</a></li>
<li><a href="#_logging_api_unsupported">11. Logging API (Unsupported)</a></li>
<li><a href="#_state_api_unsupported">12. State API (Unsupported)</a></li>
<li><a href="#_glossary">Glossary</a></li>
<li><a href="#war-deployment">Appendix A: Java WAR Deployment</a>
<ul class="sectlevel2">
<li><a href="#_walkthrough">A.1. Walkthrough</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_objectives">1.1. Objectives</h3>
<div class="paragraph">
<p>The purpose of this guide is to explain how to create a simple widget or integrate an existing widget into the Ozone Widget Framework (OWF).</p>
</div>
</div>
<div class="sect2">
<h3 id="_document_scope">1.2. Document Scope</h3>
<div class="paragraph">
<p>This guide is written for software developers who want to change an existing application into an OWF-compatible widget(s) or understand the APIs available to them for building widgets.</p>
</div>
</div>
<div class="sect2">
<h3 id="_usage">1.3. Usage</h3>
<div class="sect3">
<h4 id="_file_references">1.3.1. File References</h4>
<div class="paragraph">
<p>All directory and file paths in this guide are relative to the <code>ozone/docs/developers_guide/</code> directory.</p>
</div>
<div class="paragraph">
<p><em>Example:</em> The full path of <code>node-server/</code> would be found at <code>ozone/docs/developers_guide/node-server/</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_code">1.3.2. Example Code</h4>
<div class="paragraph">
<p>All of the code examples listed in this document can be found in the owf.war. When unpacked or unzipped, the bundle will contain a <code>/ozone-framework-server/owf-framework/sample-widgets</code> which contains .zip files of example widgets with source code built in different technology stacks. The examples included in the distribution are detailed in <a href="#example-widgets">[example-widgets]</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_additional_notes">1.4. Additional Notes</h3>
<div class="sect3">
<h4 id="_terminology_changes">1.4.1. Terminology Changes</h4>
<div class="paragraph">
<p>Previous versions of the Ozone documentation used the terms "App Component" and "Applications" (or "Apps").</p>
</div>
<div class="paragraph">
<p>To maintain a consistent nomenclature across the documentation and code base, these terms are being deprecated in favor of the original terms "Widget" and "Dashboard".</p>
</div>
</div>
<div class="sect3">
<h4 id="_warnings">1.4.2. Warnings</h4>
<div class="paragraph">
<p>The following APIs are not currently supported by OWF v8:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Logging API</p>
</li>
<li>
<p>State API</p>
</li>
<li>
<p>Chrome API</p>
</li>
<li>
<p>Drag &amp; Drop API</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, some of the APIs in this document are out-of-date or in the process of being updated or deprecated.</p>
</div>
<div class="paragraph">
<p>If you run into problems or inconsistencies, please refer to the source code or contact the OZONE Development Team.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents">1.5. Related Documents</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Related Documents</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Document</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Quick Start Guide</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Walkthrough of basic OWF functions such as using widgets; unpacking the OWF bundle; setting up a local instance of OWF; installing security certificates; truststore and keystore configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>User&#8217;s Guide</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Understanding the OWF user interface; adding, deleting, modifying widgets and using intents; accessing and using the Store;using dashboards; creating, deleting, adding, switching, modifying dashboard pages; defining accessibility features such as high-contrast themes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Administrator&#8217;s Guide</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Understanding administrative tools: adding, deleting, and editing users, groups, widgets, and dashboards; creating default content for users, groups and group dashboards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Configuration Guide</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overview of basic architecture and security; OWF installation instructions; instructions for modifying default settings; database set up and logging guidance; framework and theme customization instructions; OWF upgrade instructions; directions for adding and deleting help content.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-a-widget">2. Creating a Widget</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview">2.1. Overview</h3>
<div class="paragraph">
<p>OWF widgets are lightweight Web applications wrapped with a metadata definition that provide a description to the framework of how the widget should load. The widget metadata definition contains a number of fields including a <em>URL</em>, <em>Default Name</em>, <em>Default Height</em> and <em>Default Width</em>.</p>
</div>
<div class="paragraph">
<p>OWF provides a suite of APIs that enable the developer to extend their Web application through the use of inter-widget communication, user preferences and internationalization. Each API is written in JavaScript so that widgets can be built in a large variety of Web technologies.</p>
</div>
<div class="paragraph">
<p>Three key factors to keep in mind when creating a Widget are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OWF supports and encourages a decentralized deployment model. Widgets are not required to be deployed on the same server as OWF and can be distributed throughout the enterprise.</p>
</li>
<li>
<p>OWF is Web-technology agnostic. Widgets can be written in the JavaScript capable technology of the developer’s choice. OWF enabled applications have been built in varied technologies such as JavaScript (React, Dojo), Java (JSPs, GWT, JSF, Groovy, Grails), .NET (ASP.NET, C# .NET), Scripting Languages (PHP, Perl, Ruby on Rails), and Rich UI Frameworks/Plugins (Flex, Silverlight, Google Earth Plugin, Java Applets).</p>
</li>
<li>
<p>The location that hosts Widget descriptor files must have Cross-Origin Resource Sharing (CORS) enabled. Usually, the Web app used to create the Widget also serves as the host for the descriptor file. The method used to configure CORS support will vary based on the type of Web app platform used. For backwards compatibility, the format of the descriptor file itself is unchanged. The template is located in etc/widget/descriptor within the OWF bundle.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This document assumes that the reader has a development background and is familiar with their chosen technology stack. The tutorials found throughout this document will focus on building a simple HTML/JavaScript Web application deployed to a Java Application Server.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tutorial">2.2. Tutorial</h3>
<div class="paragraph">
<p><strong>Step 1 - Create the Announcing Clock widget</strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The complete example files are available for this tutorial under the <code>ozone/docs/developers_guide/examples/</code> directory.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create the following files in the <code>ozone/docs/developers_guide/node-server/public/</code> directory:</p>
</div>
<div class="listingblock">
<div class="title">AnnouncingClock.html</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;Announcing Clock&lt;/title&gt;
    &lt;script type="application/javascript" src="./AnnouncingClock.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    The time is: &lt;span id="clock"&gt;&amp;nbsp;&lt;/span&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">AnnouncingClock.js</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">document.addEventListener("DOMContentLoaded", start);

function start() {
    updateClock();
    setInterval(updateClock, 1000);
}

function updateClock() {
    // Format the time portion of the current date
    const timeString = new Date().toLocaleTimeString();

    // Update the time display
    document.getElementById("clock").firstChild.nodeValue = timeString;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 2 - Start the web server</strong></p>
</div>
<div class="paragraph">
<p>The examples in this guide use a simple web server using Node.js (<a href="https://nodejs.org/" class="bare">https://nodejs.org/</a>) and Express (<a href="https://expressjs.com/" class="bare">https://expressjs.com/</a>).</p>
</div>
<div class="paragraph">
<p>Using the command line, navigate to the <code>node-server/</code> directory and run the following commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>npm install
npm start</pre>
</div>
</div>
<div class="paragraph">
<p>Next, navigate to <code><a href="http://localhost:5000/AnnouncingClock.html" class="bare">http://localhost:5000/AnnouncingClock.html</a></code> to view the new Announcing Clock widget.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For instructions on deploying these examples as a Java .WAR to an application container, see <a href="#war-deployment">Appendix A, <em>Java WAR Deployment</em></a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_additional_considerations">2.3. Additional Considerations</h3>
<div class="sect3">
<h4 id="_utility_js_api">2.3.1. Utility JS API</h4>
<div class="paragraph">
<p>The JavaScript Utility API is provided to allow the developer to determine whether or not the widget is running inside OWF. This is useful if the widget needs to render differently or has different defaults depending on whether or not it is running internal or external to OWF. For instance, if a widget is supposed to turn on logging when running inside OWF, the developer can use the JavaScript Utility API to determine this.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In some previous versions of OWF, a widget launched outside of OWF would spawn an error in an alert window. Now, widget can be launched and used outside OWF. And while certain features, both specific and critical to OWF, such as the launch of security alert windows, preferences and eventing will not operate outside OWF, the error alert window will not launch, provided the widget URL is NOT appended with <code>owf=true</code>. Moreover, APIs can often throw exceptions which can make a widget fail to load.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>While originally defined in <code>js/util/widget_utils.js</code> (depreciated), the interface object now resides within the Ozone.util namespace. The entire namespace has been included in the OWF Widget JS bundles (both debug and min) for convenience.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Utility API Namespaces</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Namespace</th>
<th class="tableblock halign-left valign-top">Summary</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OWF.Util</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A namespace containing common utility functions to assist widget developers.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Utility API Methods</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Summary</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;static&gt; OWF.Util.cloneDashboard()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clones dashboard and returns a dashboard cfg object that can be used to create new dashboards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;static&gt; OWF.Util.guid()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a globally unique identifier (GUID).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;static&gt; OWF.Util.isInContainer()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This method informs a widget developer if their widget is running in a Container, such as OWF.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;static&gt; OWF.Util.isRunningInOWF()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This method informs a widget developer if their widget is running from OWF or from a direct URL call.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_best_practices">2.3.2. Best Practices</h4>
<div class="paragraph">
<p>Due to the complexity of the OWF APIs, a widget’s ability to signal that it is ready to communicate with other widgets provides a helpful tool for developers. This ready signal is typically sent after the Web app has subscribed to channels, registered RPC functions and Intents, etc. Starting with OWF 6, there is a standard way for widgets to signal this ready status.</p>
</div>
<div class="paragraph">
<p>To signal that it is ready, a widget calls <code>OWF.notifyWidgetReady()</code> after it is finished setting up any communication mechanisms. The OWF Development Team recommends that any widget that uses OWF APIs makes the call. However, widgets that use the Widget Intents API’s receive method must make this call.</p>
</div>
</div>
<div class="sect3">
<h4 id="_owf_bundled_javascript">2.3.3. OWF Bundled JavaScript</h4>
<div class="paragraph">
<p>All required OWF JavaScript is minified and bundled into one JavaScript file, found in <code>tomcat/webapps/owf/public/js/owf-widget.min.js</code>. This shields developers from future changes or upgrades to the underlying JavaScript files.</p>
</div>
<div class="paragraph">
<p>There are multiple ways that developers can reference the <code>owf-widget.min.js</code> file from their widgets. One way is to hard-code a link to the file residing on a specific OWF. This has the disadvantage of tying the widget to a particular OWF instance. Another option is to include a copy of <code>owf-widget.min.js</code> with the widget itself, and to use a relative URL to reference it. This makes the widget independent of any particular OWF instance, but ties the widget to a specific version of the <code>owf-widget.min.js</code> file. If there is a version mismatch between this file and the OWF version where the widget is run, then problems could arise.</p>
</div>
<div class="paragraph">
<p>The recommended way to include the <code>owf-widget.min.js</code> file into a widget is to create the script reference dynamically so that it always refers to the copy of owf-widget.min.js on the OWF server where the widget is currently running. The dynamic reference can be generated either server-side or client-side. To generate it server-side, use the "Referer" [sic] HTTP header, which will contain the URL of the main OWF page when the widget is launched. To retrieve the URL of the OWF instance for the widget&#8217;s client-side code, use the following JavaScript:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">JSON.parse(window.name).preferenceLocation.split('/prefs')[0];</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-a-widget">3. Adding a Widget to OWF</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_2">3.1. Overview</h3>
<div class="paragraph">
<p>OWF provides a Widget Manager, located by clicking the Administration link in the drop-down User Menu (you must be an OWF administrator to see the Administration link) and then click Widgets Administration. Administrators can use this manager to create widget descriptor files and add widget definitions to OWF. The manager allows an administrator to complete the widget definition or edit the descriptor URL in the user interface, then OWF maps the widget to users in the system. Once a widget definition has been created and mapped to a user, it will then be added to the user’s Widgets menu or toolbar depending on the widget type.</p>
</div>
<div class="paragraph">
<p>Due to the fact that a widget definition actually points to the URL of a lightweight Web application, an administrator is not required to update widget definitions unless the location of the widget changes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tutorial_2">3.2. Tutorial</h3>
<div class="sect3">
<h4 id="creating-descriptors">3.2.1. Creating Descriptor Files for Widgets</h4>
<div class="paragraph">
<p>Developers can save the Widget information in the descriptor file and then share that file with administrators. This allows administrators to import data instead of typing entries for each field. The administrator simply enters a URL and the widget&#8217;s information is automatically retrieved from a descriptor file that a developer maintains. Administrators can change properties in the widget’s definition once it has been added to OWF. However, an administrator’s changes will only affect their deployment of OWF, unless the administrator exports those changes to the Web-accessible location where the descriptor URLs are stored.</p>
</div>
<div class="paragraph">
<p>Descriptor URLs offer several benefits. They reduce the risk of typing errors when entering widget data into the OWF interface. They allow for several installations of OWF to easily share widget information via the descriptor file. In addition, descriptor files can contain a universal name which is a developer-generated, custom identifier that can be used to identify the widget across multiple OWF instances.</p>
</div>
<div class="paragraph">
<p>To support Internet Explorer 10 and higher, the location that hosts Widget descriptor files must be CORS enabled. Usually, the Web app used to create the Widget also serves as the host for the descriptor file. The method used to configure CORS support will vary based on the type of Web app platform used. For backwards compatibility, the format of the descriptor file itself is unchanged. The template is located in <code>etc/widget/descriptor</code> within the OWF bundle.</p>
</div>
<div class="paragraph">
<p>To create a widget descriptor URL, follow these instructions:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Sign in to OWF as an administrator.</p>
</li>
<li>
<p>Click the Administration link, located on the drop-down User Menu on the toolbar to open the Administration Tools. Select Widgets Administration to open the Widgets Manager.</p>
</li>
<li>
<p>Click Create to open the Widget Editor.</p>
</li>
<li>
<p>Click “Don’t have a descriptor URL?”</p>
</li>
<li>
<p>Populate the mandatory fields in the definition and click Apply.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For more information about specific entry fields, please see the Administrator’s Guide.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>OPTIONAL: Add the capability to send intents. An Intent is simply an object describing an action and a data type. Sending an Intent should be tied to a user-generated action such as clicking a button or link. (If the widget does not require an intent, skip this step.)
Developers should use the Widget Editor to add and edit intents.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To add an intent, select the Intents tab in the Widget Editor and click Create.</p>
</li>
<li>
<p>Populate the following fields:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong>Action</strong> - The Action should be a verb describing what the user is trying to do (i.e. plot, pan, zoom, view, graph, etc.).</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Intents are NOT case sensitive.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Data Type</strong> - The Data Type is an object containing the data that the intent is sending. It describes what type of data is being acted upon. The data type format is described in 12.4.1: Recommended Intents Data Type Conventions.<br></p>
<div class="paragraph">
<p>The format of the data depends solely on how the sending or receiving widget is expecting to use the data. For example, “application/vnd.owf.sample.price” tells the NYSE Widget’s how to display price.</p>
</div>
</li>
<li>
<p><strong>Send</strong> – Checked by default, this field identifies if the widget can send intents.</p>
</li>
<li>
<p><strong>Receive</strong> – This field identifies if the widget can receive intents.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click OK.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Return to the Widget Manager.</p>
</li>
<li>
<p>Select the new Widget.</p>
</li>
<li>
<p>Click the split Edit button, then select Export from the drop-down menu.</p>
</li>
<li>
<p>Enter a File Name (this will be the name of the HTML descriptor file) and click OK.</p>
</li>
<li>
<p>Save the file to a Web-accessible location like a directory where widget data is stored.</p>
</li>
<li>
<p>Return to the OWF user interface and open the Widget Manager.</p>
</li>
<li>
<p>Select the new widget, and click Edit.</p>
</li>
<li>
<p>From the Widget Editor, enter the new Descriptor URL location, click Load, then, click Apply.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
From the Widget Editor, administrators can edit the widget descriptor URL. However, those changes will not change the “master” copy of the descriptor unless they replace the descriptor file stored at the Web-accessible location referenced above.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_sharing_descriptor_files">3.2.2. Sharing Descriptor Files</h4>
<div class="paragraph">
<p>There are two ways to share widget descriptors:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Export the file</strong><br>
To obtain an exportable HTML file, select the widget in the Widget Manager, click the split edit button and select Export.<br></p>
<div class="paragraph">
<p>Exporting the widget descriptor URL only sends a copy of the file. The administrator will not receive future updates to that file that is stored on the Web-accessible location.</p>
</div>
</li>
<li>
<p><strong>Share the descriptor location</strong><br>
Sending a link to the widget descriptor file that is stored on a Web-accessible location will enable the administrator to receive updates to the widget descriptor URL by clicking Load, then Apply in the Widget Editor.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_eventing_api">4. Eventing API</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3">4.1. Overview</h3>
<div class="paragraph">
<p>In order to create rich, interactive and integrated presentation-tier workflows, widgets must be able to communicate with each other; one method to do this is via the Eventing, or Publish-Subscribe, API. The Eventing API is a client-side browser communication mechanism that allows widgets to communicate with each other by using an asynchronous publish-subscribe messaging system.</p>
</div>
<div class="paragraph">
<p>Widgets have the ability to send and receive data on named channels. All widgets can be built so they can publish messages to any channel, just as all widgets can be built to subscribe to any channel at any time.</p>
</div>
<div class="paragraph">
<p>There are two main components to the Eventing API. The first component is the supporting infrastructure within OWF that routes messages; however, this should remain mostly transparent to the widget developer. The second component, of more direct interest to developers, is the infrastructure available to each widget, detailed below.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tutorial_3">4.2. Tutorial</h3>
<div class="paragraph">
<p>This tutorial will go through the process of creating a new widget called Second Tracker. The new widget will use the Eventing API to track how many seconds the Announcing Clock widget has been running. The Announcing Clock widget, created in <a href="#creating-a-widget">Chapter 2, <em>Creating a Widget</em></a>, must be updated to broadcast an event using the Eventing API.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Example files</div>
<div class="paragraph">
<p>The source files for this tutorial are available under the <code>ozone/docs/developers_guide/examples/</code> directory.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SecondTracker.html</code></p>
</li>
<li>
<p><code>SecondTracker.js</code></p>
</li>
<li>
<p><code>AnnouncingClock_Eventing.html</code></p>
</li>
<li>
<p><code>AnnouncingClock_Eventing.js</code></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Step 1 - Create the Second Tracker widget</strong></p>
</div>
<div class="paragraph">
<p>Create the following files in the <code>ozone/docs/developers_guide/node-server/public/</code> directory:</p>
</div>
<div class="listingblock">
<div class="title">SecondTracker.html</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;Second Tracker&lt;/title&gt;

    &lt;link type="text/css" rel="stylesheet" href="./css/widget.css"&gt;

    &lt;script type="application/javascript" src="./owf-widget.js"&gt;&lt;/script&gt;
    &lt;script type="application/javascript" src="./SecondTracker.js"&gt;&lt;/script&gt;
    &lt;script type="application/javascript"&gt;
        // If not set, defaults to /&lt;context&gt;/js/eventing/rpc_relay.uncompressed.html
        // OWF.relayFile = "/owf-sample-html/js/eventing/rpc_relay.uncompressed.html";
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="widgetContents"&gt;
        &lt;div class="panel-header"&gt;
            Second Tracker
        &lt;/div&gt;

        &lt;div class="panel-body"&gt;
            &lt;table class="messagePanel"&gt;
                &lt;tr&gt;
                    &lt;td width="50%"&gt;Current Time:&lt;/td&gt;
                    &lt;td&gt;&lt;span id="currentTime"&gt;&lt;/span&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td width="50%"&gt;Connection Uptime (s):&lt;/td&gt;
                    &lt;td&gt;&lt;span id="minutesOnline"&gt;0&lt;/span&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td width="50%"&gt; Received on channel:&lt;/td&gt;
                    &lt;td&gt;&lt;span id="channelName"&gt;&lt;/span&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/table&gt;

            &lt;div id="tracker-error-panel" class="error-panel"&gt;
                &lt;span id="error"&gt;&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The relay file is configured by setting <code>OWF.relayFile</code> to the location of the file. In the above example, <code>/owf-sample-html/</code> is assumed to be the root context. The developer must replace <code>/owf-sample-html/js/eventing/</code> with the correct relative location of the <code>rpc_relay.uncompressed.html file</code> (see the note below for more information).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Pay attention to the OWF relay file argument. In order to work correctly, the relay file must be specified with full location details, but without a fully qualified path. In the case where the relay is residing at <code><a href="http://server/path/relay.html" class="bare">http://server/path/relay.html</a></code>, the path used must be from the context root of the local widget. In this case, it would be <code>/path/relay.html</code>. Do not include the protocol.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">SecondTracker.js</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">document.addEventListener("DOMContentLoaded", function() {
    OWF.ready(start);
});

function start() {
    document.getElementById("currentTime").innerHTML = new Date();

    let channelToUse = "ClockChannel";

    const launchConfig = OWF.Launcher.getLaunchData();

    // No launch configuration; use the default channel
    if (!launchConfig) {
        document.getElementById("error").innerHTML = "Widget was launched manually";
        document.getElementById("tracker-error-panel").style.display = "block";
    }

    // Got the launch configuration; use the dynamically specified channel
    else {
        // Parse the configuration
        const launchConfigJson = JSON.parse(launchConfig);
        channelToUse = launchConfigJson.channel;

        // Hide the error panel
        document.getElementById("tracker-error-panel").style.display = "none";
    }

    // Update the displayed channel
    document.getElementById("channelName").innerHTML = channelToUse;

    // Subscribe to the channel using the Eventing API
    OWF.Eventing.subscribe(channelToUse, this.update);
}

/**
 * The function called every time a message is received on the eventing channel
 */
function update(sender, msg) {
    let count = parseInt(document.getElementById("minutesOnline").innerHTML);
    count = count + 1;
    document.getElementById("minutesOnline").innerHTML = count;
    document.getElementById("currentTime").innerHTML = msg;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code above performs several functions:</p>
</div>
<div class="paragraph">
<p>The initial code waits for the page to be loaded, using the standard <code>DOMContentLoaded</code> event. Once the page is ready, the widget must also wait for OWF to become ready. The <code>OWF.ready</code> function takes a callback that executes when the widget has connected to OWF and the widget APIs are ready to use.</p>
</div>
<div class="listingblock">
<div class="title">SecondTracker.js</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">document.addEventListener("DOMContentLoaded", function() {
    OWF.ready(start);
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>start</code> function initializes the widget. It subscribes to the channel <code>ClockChannel</code>, passing in its <code>update</code> function. Additionally, if the widget has been launched using the Launcher API, it uses the launch data to select a different channel name to subscribe to. Refer to the <a href="#launcher-api">[launcher-api]</a> for additional details.</p>
</div>
<div class="paragraph">
<p>The <code>update</code> function serves as a callback for the Eventing API. Whenever a message is broadcast on the channel that the update function was subscribed to (in this case, <code>ClockChannel</code>), the function will be invoked. All Eventing API callback functions should take two arguments: <code>sender</code> and <code>message</code>. When the update function is fired, the count is incremented, and the <code>innerHTML</code> of the <code>currentTime</code> span is updated to reflect the message sent by the clock.</p>
</div>
<div class="paragraph">
<p><strong>Step 2 - Include the Widget API JavaScript library</strong></p>
</div>
<div class="paragraph">
<p>The Announcing Clock must be updated to publish messages on the expected channel.</p>
</div>
<div class="paragraph">
<p>Replace the code in the <code>AnnouncingClock.html</code> file with the following:</p>
</div>
<div class="listingblock">
<div class="title">AnnouncingClock.html</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;Announcing Clock (Eventing)&lt;/title&gt;

    &lt;link type="text/css" rel="stylesheet" href="./css/widget.css"&gt;

    &lt;script type="application/javascript" src="./owf-widget.js"&gt;&lt;/script&gt;
    &lt;script type="application/javascript"&gt;
        // If not set, defaults to /&lt;context&gt;/js/eventing/rpc_relay.uncompressed.html
        // OWF.relayFile = "/owf-sample-html/js/eventing/rpc_relay.uncompressed.html";
    &lt;/script&gt;

    &lt;script type="application/javascript" src="./AnnouncingClock_Eventing.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="widgetContents"&gt;
        &lt;div class="panel-header"&gt;
            Announcing Clock
        &lt;/div&gt;

        &lt;div id="error-panel" class="error-panel"&gt;
        &lt;/div&gt;

        &lt;div class="panel-body"&gt;
            &lt;div class="clock-frame"&gt;
                &lt;span id="clock"&gt;&amp;nbsp;&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class="button-panel"&gt;
        &lt;/div&gt;

        &lt;div id="message-panel" class="message-panel"&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the following <code>&lt;script&gt;</code> tags have been added:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">&lt;script type="application/javascript" src="./owf-widget.js"&gt;&lt;/script&gt;
&lt;script type="application/javascript"&gt;
    // If not set, defaults to /&lt;context&gt;/js/eventing/rpc_relay.uncompressed.html
    // OWF.relayFile = "/owf-sample-html/js/eventing/rpc_relay.uncompressed.html";
&lt;/script&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 3 - Broadcast a message using the Eventing API</strong></p>
</div>
<div class="paragraph">
<p>Replace the code in the <code>AnnouncingClock.js</code> file with the following:</p>
</div>
<div class="listingblock">
<div class="title">AnnouncingClock.js</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">document.addEventListener("DOMContentLoaded", function() {
    OWF.ready(start);
});

function start() {
    updateClock();
    setInterval(updateClock, 1000);

    const msg = "Running in OWF: " + (OWF.Util.isRunningInOWF() ? "Yes" : "No");

    document.getElementById("message-panel").innerHTML = msg;
    document.getElementById("message-panel").style.display = "block";
}

function updateClock() {
    // Format the time portion of the current date
    const timeString = new Date().toLocaleTimeString();

    // Update the time display
    document.getElementById("clock").firstChild.nodeValue = timeString;

    OWF.Eventing.publish("ClockChannel", timeString);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>updateClock</code> function has been modified to publish the current time. See the code snippet below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">OWF.Eventing.publish("ClockChannel", timeString);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once complete, any widget that subscribes to <code>ClockChannel</code> will receive messages broadcast from this widget. Once this widget is closed, the broadcast will stop.</p>
</div>
<div class="paragraph">
<p><strong>Step 4 - Start the web server</strong></p>
</div>
<div class="paragraph">
<p>Using the command line, navigate to the <code>node-server/</code> directory and run the following commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>npm install
npm start</pre>
</div>
</div>
<div class="paragraph">
<p>This will start the sample web server to statically host the widget files at <a href="http://localhost:5000/" class="bare">http://localhost:5000/</a>.</p>
</div>
<div class="paragraph">
<p><strong>Step 5 - Add the Second Tracker and Announcing Clock widgets to OWF</strong></p>
</div>
<div class="paragraph">
<p>To test the added Eventing API functionality, the widgets must be run from within OWF. Add the Second Tracker and modified Announcing Clock widgets to OWF via the OWF Admin page. For details on how to do this, see <a href="#add-a-widget">Chapter 3, <em>Adding a Widget to OWF</em></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_additional_considerations_2">4.3. Additional Considerations</h3>
<div class="sect3">
<h4 id="_channel_conventions">4.3.1. Channel Conventions</h4>
<div class="paragraph">
<p>It is important to use a unique channel name so widgets are not accidentally published or subscribed to a pre-existing channel.</p>
</div>
<div class="paragraph">
<p>One approach is to use a hierarchical naming pattern with the levels of the hierarchy separated by a dot (<code>.</code>). To form a unique channel, prefix the channel name with a customer domain name reversing the component order. For example, if developing a widget for a company with the domain name of <code>mycompany.com</code>, the channel name’s prefix would be <code>com.mycompany</code>. From that point, naming conventions for an individual’s organization can be used to complete the channel name.</p>
</div>
</div>
<div class="sect3">
<h4 id="_payload_conventions_json_encoding">4.3.2. Payload Conventions: JSON Encoding</h4>
<div class="paragraph">
<p>It is acceptable to directly encode the data broadcasted on Eventing channels as a simple string. This approach works when sending only a single variable. While a flat string would require the least amount of overhead, it leads to rigid code in the data, especially if the complexity of the sent data increases, because the code that parses the string may not be flexible. In that case, refactoring the message payload may break contract with established listening widgets.</p>
</div>
<div class="paragraph">
<p>Sending JSON objects with the data directly embedded is an approach that leads to considerably more flexible code. This process allows for the adding of additional data without having to re-code widgets that may not have been updated to communicate with the most current version of the broadcasting widget.</p>
</div>
</div>
<div class="sect3">
<h4 id="_payload_conventions_restful_data_uris">4.3.3. Payload Conventions: RESTful Data URIs</h4>
<div class="paragraph">
<p>While simple strings and JSON objects will work well for many use cases, there are two situations in which widget developers can run into issues:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The information that is being sent has potential security concerns.</p>
</li>
<li>
<p>The size of information to be passed is large (such as a data set with hundreds of rows). Sending large quantities of information across the client browser can cause memory and performance issues.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The solution in both cases is to send a reference to the information rather than the information itself. The standardized best practice for sending said information is to send a REST URI encoded as a JSON object that contains the correct way to look up this information. The JSON object would then be parsed by the receiving widget and acted upon appropriately.</p>
</div>
<div class="paragraph">
<p>Currently, the standardized JSON object has only one field, dataURI. Later versions of this standard may contain additional fields. Adhering to this standard will ensure that other OWF-compliant widgets will be able to communicate effectively.</p>
</div>
<div class="listingblock">
<div class="title">Sample JSON object containing a REST data URI</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
   "dataURI": "https://server/restful/path/to/object"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a widget to make information available to other OWF widgets by exposing a REST API, it is important to guarantee that REST information will be accessible via cross-domain through AJAX calls. By default, many browsers will prevent such a call from succeeding and therefore developers must take explicit steps to make their application function correctly.</p>
</div>
<div class="paragraph">
<p>The recommended approach is to use the Cross-Origin Resource Sharing (CORS) standard, which allows the browser and the server to cooperate in a way which safely allows cross-origin calls to succeed. See the official CORS specification for details: <a href="http://www.w3.org/TR/cors/" class="bare">http://www.w3.org/TR/cors/</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_eventing_api_enhancements">4.3.4. Eventing API Enhancements</h4>
<div class="paragraph">
<p>OWF automatically enables the Eventing API and the Drag &amp; Drop API. By automatically enabling the Eventing API, a widget activates when a user clicks inside it. Without it, users would have to click once to focus the widget and then click a second time to activate it. The Eventing API also activates Drag &amp; Drop indicators. For example, a widget will activate when a user drags the mouse over it.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preferences_api">5. Preferences API</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_4">5.1. Overview</h3>
<div class="paragraph">
<p>The Preferences API provides a convenient mechanism for the developer to store user specific data to the OWF database. A user preference is a <code>string</code> value that is uniquely mapped to a user, identified by name and namespace combination. The namespace should use a hierarchical naming pattern to avoid naming collision with other widgets. The value can be any string value, including serialized JSON.</p>
</div>
<div class="paragraph">
<p>In the tutorial below, a military time checkbox will be added to the Announcing Clock widget developed in <a href="#creating-a-widget">Chapter 2, <em>Creating a Widget</em></a>. The state of this checkbox, whether it has been checked or not, is stored in a user preference.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tutorial_4">5.2. Tutorial</h3>
<div class="paragraph">
<p><strong>Step 1 - Update the Announcing Clock HTML file</strong></p>
</div>
<div class="paragraph">
<p>Replace the code in the <code>AnnouncingClock.html</code> file with the following:</p>
</div>
<div class="listingblock">
<div class="title">AnnouncingClock.html</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;Announcing Clock (Preferences)&lt;/title&gt;

    &lt;link type="text/css" rel="stylesheet" href="./css/widget.css"&gt;

    &lt;script type="application/javascript" src="./owf-widget.js"&gt;&lt;/script&gt;
    &lt;script type="application/javascript"&gt;
        // If not set, defaults to /&lt;context&gt;/js/eventing/rpc_relay.uncompressed.html
        // OWF.relayFile = "/owf-sample-html/js/eventing/rpc_relay.uncompressed.html";
    &lt;/script&gt;

    &lt;script type="application/javascript" src="./AnnouncingClock_Preferences.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="widgetContents"&gt;
        &lt;div class="panel-header"&gt;
            Announcing Clock
        &lt;/div&gt;

        &lt;div id="error-panel" class="error-panel"&gt;
        &lt;/div&gt;

        &lt;div class="panel-body"&gt;
            &lt;div class="clock-frame"&gt;
                &lt;span id="clock"&gt;&amp;nbsp;&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;div id="button-panel" class="button-panel"&gt;
            &lt;label for="checkboxMilitaryTime"&gt;Use Military Time:&lt;/label&gt;
            &lt;input id="checkboxMilitaryTime" type="checkbox" onClick="setMilitaryTimePreference(this.checked);"/&gt;
        &lt;/div&gt;

        &lt;div id="message-panel" class="message-panel"&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the following <code>&lt;script&gt;</code> tags have been added:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">&lt;script type="application/javascript" src="./owf-widget.js"&gt;&lt;/script&gt;
&lt;script type="application/javascript"&gt;
    // If not set, defaults to /&lt;context&gt;/js/eventing/rpc_relay.uncompressed.html
    // OWF.relayFile = "/owf-sample-html/js/eventing/rpc_relay.uncompressed.html";
&lt;/script&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>An <code>&lt;input&gt;</code> checkbox element has been added. Note the <code>onClick</code> event listener, which calls the method to save the preference when the user toggles the checkbox.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">&lt;input id="checkboxMilitaryTime" type="checkbox" onClick="setMilitaryTimePreference(this.checked);"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 2 - Update the Announcing Clock JavaScript file</strong></p>
</div>
<div class="paragraph">
<p>Replace the initial code in the <code>AnnouncingClock.js</code> file with the following:</p>
</div>
<div class="listingblock">
<div class="title">AnnouncingClock.js</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">let militaryTime = false;

document.addEventListener("DOMContentLoaded", function() {
    OWF.ready(start);
});

function start() {
    updateClock();
    setInterval(updateClock, 1000);

    const msg = "Running in OWF: " + (OWF.Util.isRunningInOWF() ? "Yes" : "No");
    document.getElementById("message-panel").innerHTML = msg;
    document.getElementById("message-panel").style.display = "block";

    document.getElementById("button-panel").style.display = "block";

    getPreference();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since the widget is using the Eventing API, it must first wait until OWF has connected and the APIs are ready to use. This initial code waits for the page to be loaded, using the standard <code>DOMContentLoaded</code> event. Once the page is ready, the <code>OWF.ready</code> function is given a callback to execute when the widget is connected and ready.</p>
</div>
<div class="paragraph">
<p><strong>Step 3 - Retrieve the Military Time preference</strong></p>
</div>
<div class="paragraph">
<p>Add the following functions to the <code>AnnouncingClock.js</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">function getPreference() {
    OWF.Preferences.getUserPreference({
        namespace: "com.mycompany.AnnouncingClock",
        name: "militaryTime",
        onSuccess: onGetPreferenceSuccess,
        onFailure: onGetPreferenceFailure
    });
}

function onGetPreferenceSuccess(pref) {
    militaryTime = pref.value === "true";

    document.getElementById("checkboxMilitaryTime").checked = militaryTime;
}

function onGetPreferenceFailure(error, status) {
    if (status !== 404) {
        OWF.Util.ErrorDlg.show("Got an error getting preferences! Status Code: " + status + " . Error message: " + error);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>getPreference</code> function will asynchronously fetch the user&#8217;s <code>com.mycompany.AnnouncingClock.militaryTime</code> preference.</p>
</div>
<div class="paragraph">
<p>After successfully retrieving the user preference, the <code>onSuccess</code> callback is called, passing the resulting preference object to the specified <code>onGetPreferenceSuccess</code> function. This uses the preference value to update the global <code>militaryTime</code> setting and update the checkbox.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The returned preference <code>value</code> is always a <code>string</code> and must be handled accordingly.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If a failure occurs, the <code>onFailure</code> callback will be called, passing an error message and status code to the new <code>onGetPreferenceFailure</code> function.</p>
</div>
<div class="paragraph">
<p>If the preference does not exist, a failure status code of <code>404</code> (Not Found), will be returned. This is a likely occurrence, as the user may not have saved their preference yet.</p>
</div>
<div class="paragraph">
<p><strong>Step 4 - Update the Military Time preference</strong></p>
</div>
<div class="paragraph">
<p>Add the following functions to the <code>AnnouncingClock.js</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">function setMilitaryTimePreference(checkedState) {
    militaryTime = checkedState;

    OWF.Preferences.setUserPreference({
        namespace: "com.mycompany.AnnouncingClock",
        name: "militaryTime",
        value: checkedState,
        onSuccess: function() {},
        onFailure: onSetPreferenceFailure
    });
}

function onSetPreferenceFailure(error, status) {
    OWF.Util.ErrorDlg.show("Got an error updating preferences! Status Code: " + status + " . Error message: " + error);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the user clicks the checkbox, the <code>setMilitaryTimePreference</code> function is called. The <code>OWF.Preferences.setUserPreference</code> API method is used to asynchronously create or update the preference with the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>namespace</code> of <code>com.mycompany.AnnouncingClock</code>.</p>
</li>
<li>
<p>A <code>name</code> of <code>militaryTime</code>.</p>
</li>
<li>
<p>A <code>value</code> of either <code>true</code> or <code>false</code>, depending on whether or not the military time checkbox is checked.</p>
</li>
<li>
<p>The <code>onSuccess</code> callback to execute if the user preference is successfully stored in the database.<br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since no action is required under a successful completion in this tutorial, we are passing a no-op function.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The <code>onFailure</code> callback to execute, <code>onSetPreferenceFailure</code>, that will show an error message dialog if a failure occurs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Step 5 - Update the display to accommodate the Military Time preference</strong></p>
</div>
<div class="paragraph">
<p>Replace the <code>updateClock</code> function in the <code>AnnouncingClock.js</code> with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">function updateClock() {
    // Format the time portion of the current date
    const timeString = new Date().toLocaleTimeString(undefined, { hour12: !militaryTime });

    // Update the time display
    document.getElementById("clock").firstChild.nodeValue = timeString;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The current time will now be displayed in either regular or military time, depending on the state of the military time checkbox.</p>
</div>
<div class="paragraph">
<p><strong>Step 6 - Start the web server</strong></p>
</div>
<div class="paragraph">
<p>Using the command line, navigate to the <code>node-server/</code> directory and run the following commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>npm install
npm start</pre>
</div>
</div>
<div class="paragraph">
<p>This will start the sample web server to statically host the widget files at <a href="http://localhost:5000/" class="bare">http://localhost:5000/</a>.</p>
</div>
<div class="paragraph">
<p><strong>Step 7 - Add the Announcing Clock widget to OWF</strong></p>
</div>
<div class="paragraph">
<p>To test the added Preferences API functionality, the widget must be run from within OWF. Add the modified Announcing Clock widget to OWF via the OWF Admin page. For details on how to do this, see <a href="#add-a-widget">Chapter 3, <em>Adding a Widget to OWF</em></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_preferences_api_reference">5.3. Preferences API Reference</h3>
<div class="paragraph">
<p>The Preferences API comprises the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">getUserPreference({
  namespace: "namespace",
  name: "name",
  onSuccess: onSuccessCallback,
  onFailure: onFailureCallback
});</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">setUserPreference({
  namespace: "namespace",
  name: "name",
  value: "value",
  onSuccess: onSuccessCallback,
  onFailure: onFailureCallback
});</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">deleteUserPreference({
  namespace: "namespace",
  name: "name",
  onSuccess: onSuccessCallback,
  onFailure: onFailureCallback
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each of these methods communicates with the server asynchronously and therefore requires the use of callback functions to provide the results of the requested operation.</p>
</div>
<div class="paragraph">
<p>For all three methods, the <code>onSuccess</code> callback should be a callback function that accepts one argument, a JSON object of the following structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  value: "true",
  path: "militaryTime",
  user: {
    userId: "testAdmin1"
  },
  namespace: "com.mycompany.AnnouncingClock"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In <code>getUserPreference</code>, this is the preference retrieved. In <code>setUserPreference</code>, this is the preference that has been created. And in <code>deleteUserPreference</code>, this is the preference that was deleted.</p>
</div>
<div class="paragraph">
<p>If a preference is not found in a call to <code>getUserPreference</code>, a different JSON object is returned to the <code>onSuccess</code> function, which looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  preference: null,
  success: true
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If an error occurs, such as a <code>500</code> (Internal Server Error), the <code>onFailure</code> callback is executed. It is passes two arguments, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">function onFailure(errorMessage, statusCode) {
  alert("Error (" + statusCode + "): " + errorMessage);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>errorMessage</code> argument is a <code>string</code> describing the error, while <code>errorCode</code> is a <code>number</code> code indicating the HTTP error code returned by the server.</p>
</div>
</div>
<div class="sect2">
<h3 id="_additional_considerations_3">5.4. Additional Considerations</h3>
<div class="sect3">
<h4 id="_preference_naming_conventions">5.4.1. Preference Naming Conventions</h4>
<div class="paragraph">
<p>In order to avoid name collisions with user preferences defined by other widgets, always use a hierarchical naming pattern with the levels of the hierarchy separated by a dot (<code>.</code>). To form a unique namespace, prefix the internet domain name, reversing the component order. For example, if developing a widget for a company with the domain name of <code>mycompany.com</code> then the namespace prefix would be <code>com.mycompany</code>. From that point, organizational naming conventions can be applied to the rest of the namespace.</p>
</div>
</div>
<div class="sect3">
<h4 id="_payload_conventions_json_encoding_2">5.4.2. Payload Conventions: JSON Encoding</h4>
<div class="paragraph">
<p>To store several pieces of information, multiple user preferences can be created. As an alternative, they can be aggregated into one logical object, converted into a JSON string, and stored into one user preference. For example, consider storing a user’s first, middle and last name. Using the first option would require the use of the following three user preferences:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>com.mycompany.widget.firstName
com.mycompany.widget.middleName
com.mycompany.widget.lastName</pre>
</div>
</div>
<div class="paragraph">
<p>Using the second option would require just one user preference using the following JSON string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
  "firstName": "John",
  "middleName": "Quincy",
  "lastName": "Adams"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sending JSON objects with the data directly embedded is an approach that leads to considerably more flexible code. This process allows for the adding of additional data without having to re-code widgets that may not have been updated to communicate with the most current version of the broadcasting widget.</p>
</div>
</div>
<div class="sect3">
<h4 id="_payload_conventions_restful_data_uris_2">5.4.3. Payload Conventions: RESTful Data URIs</h4>
<div class="paragraph">
<p>While simple strings and JSON objects will work well for many use cases, there are two situations in which widget developers can run into issues:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The information that is being sent has potential security concerns.</p>
</li>
<li>
<p>The size of information to be passed is large (such as a data set with hundreds of rows). Sending large quantities of information across the client browser can cause memory and performance issues.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The solution in both cases is to send a reference to the information rather than the information itself. The standardized best practice for sending said information is to send a REST URI encoded as a JSON object that contains the correct way to look up this information. The JSON object would then be parsed by the receiving widget and acted upon appropriately.</p>
</div>
<div class="paragraph">
<p>Currently, the standardized JSON object has only one field, dataURI. Later versions of this standard may contain additional fields. Adhering to this standard will ensure that other OWF-compliant widgets will be able to communicate effectively.</p>
</div>
<div class="listingblock">
<div class="title">Sample JSON object containing a REST data URI</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
   "dataURI": "https://server/restful/path/to/object"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a widget to make information available to other OWF widgets by exposing a REST API, it is important to guarantee that REST information will be accessible via cross-domain through AJAX calls. By default, many browsers will prevent such a call from succeeding and therefore developers must take explicit steps to make their application function correctly.</p>
</div>
<div class="paragraph">
<p>The recommended approach is to use the Cross-Origin Resource Sharing (CORS) standard, which allows the browser and the server to cooperate in a way which safely allows cross-origin calls to succeed. See the official CORS specification for details: <a href="http://www.w3.org/TR/cors/" class="bare">http://www.w3.org/TR/cors/</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_launcher_api">6. Launcher API</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_5">6.1. Overview</h3>
<div class="paragraph">
<p>The Launcher API allows widget to send data to another widget. It is possible that one of the widgets sending or receiving the data does not have a user interface. Those widgets can be configured as background widgets (explained in the <em>OWF Administrator’s Guide</em>).</p>
</div>
<div class="paragraph">
<p>This tutorial will go through the process of using the Launcher API by describing the behavior of the Channel Listener and Channel Shouter widgets. Channel Listener and Channel Shouter are example widgets included with OWF. In the tutorial below, the Channel Listener and Channel Shouter widgets work together to demonstrate both the Eventing and the Launcher APIs. The widget launching functionality is commented out by default. For this tutorial, uncomment that section of the code.</p>
</div>
<div class="paragraph">
<p>Channel Listener allows the user to subscribe to channels by entering the channel name into a text box and pressing the button on the widget. The widget will then display any messages which are broadcast on the channels to which it is subscribed. Channel Shouter allows the user to publish messages to specific channels by entering both the name of a specific channel as well as the message text into text boxes and pressing the button.</p>
</div>
<div class="paragraph">
<p>To demonstrate the Launcher API, if a user only has a Channel Shouter on their application, any message sent by the Channel Shouter will launch the Channel Listener. Once launched, the Channel Listener will be listening to the same channel and display the messages which get broadcast by the Channel Shouter.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tutorial_5">6.2. Tutorial</h3>
<div class="paragraph">
<p><strong>Step 1 - Import the correct JavaScript Files</strong></p>
</div>
<div class="paragraph">
<p>The example <code>ChannelListener.gsp</code> and <code>ChannelShouter.gsp</code> files use the maximum JavaScript import list.</p>
</div>
<div class="paragraph">
<p>The minimum required include list needed to use the Launcher API is described in the <a href="#required-includes">[required-includes]</a> section.</p>
</div>
<div class="paragraph">
<p><strong>Step 2 - Uncomment the Launcher API functionality</strong></p>
</div>
<div class="paragraph">
<p>The Launcher API functionality is commented out by default. To use the sample, include the code in <code>ChannelShouter.gsp</code>.</p>
</div>
<div class="paragraph">
<p><strong>Step 3 - Wrap the JavaScript that requires the Launcher API in the OWF.ready function</strong></p>
</div>
<div class="paragraph">
<p>The Launcher API requires the use of Eventing. See <code>ChannelShouter.gsp</code> for example:</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">OWF.ready(shoutInit);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 4 - Find the GUID for the widget to be launched </strong></p>
</div>
<div class="paragraph">
<p>To launch a widget, the developer must know the widget’s GUID. This tutorial determines the widget’s GUID by querying the Preferences API using the findWidgets function shown below. This function retrieves a list of all widgets that a user has access to, including widget names and GUIDs. If the name of the widget is known, it is therefore easy to find the appropriate GUID, which can then be saved as a preference. The following code is searching for a widget named Channel Listener.</p>
</div>
<div class="listingblock">
<div class="title">ChannelShouter.gsp</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">…
var scope = this;
shoutInit = owfdojo.hitch(this, function() {
  OWF.Preferences.findWidgets({
    searchParams: {
      widgetName: "Channel Listener"
    },
    onSuccess: function(result) {
      scope.guid = result[0].id;
    },
    onFailure: function(err) { /* No op */ }
  });
});
…</code></pre>
</div>
</div>
<div class="paragraph">
<p>For additional ways to find the widget&#8217;s GUID, see the below section Alternative Ways to Find a Widgets’s GUID.</p>
</div>
<div class="paragraph">
<p><strong>Step 5 - Launch the widget</strong></p>
</div>
<div class="paragraph">
<p>To launch the widget, use the <code>launch</code> function on the OWF.Launcher object that was created as a result of <code>OWF.ready</code>. The <code>launch</code> function takes a configuration object which has four attributes:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>guid</code></dt>
<dd>
<p>a <code>string</code> containing the unique ID of the widget to be opened.</p>
</dd>
<dt class="hdlist1"><code>launchOnlyIfClosed</code></dt>
<dd>
<p>a <code>boolean</code> flag which decides if a new widget should always be opened (<code>false</code>), or if the widget is already present to restore it (<code>true</code>).</p>
</dd>
<dt class="hdlist1"><code>title</code></dt>
<dd>
<p>a <code>string</code> that will replace the widget’s title when launched.</p>
</dd>
<dt class="hdlist1"><code>data</code></dt>
<dd>
<p>a <code>string</code> representing an initial set of data to be sent only if a new widget is opened.<br>
The data which is going to be sent must be passed as a string. In the example below, the data to be sent is a JavaScript object with two attributes – channel and message. Next, this object must be converted into a JSON string. This is accomplished by using the <code>OWF.Util.toString</code> utility function.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the widget to be launched is already in an OWF application, the data value will not be sent.
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>In the code shown below, the widget to be launched is Channel Listener.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">shout = owfdojo.hitch(this, function () {
  var channel = document.getElementById("InputChannel").value;
  var message = document.getElementById("InputMessage").value;

  if (channel != null &amp;&amp; channel != "") {
…
    if (scope.guid != null &amp;&amp; typeopf scope.guid == "string") {
      var data = {
        channel: channel,
        message: message
      };
      var dataString = OWF.Util.toString(data);
      OWF.Launcher.launch({
         guid: scope.guid,
         launchOnlyIfClosed: true,
         title: "Channel Listener Launched",
         data: dataString
      }, function(response) {
…
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 6 - Retrieve the initial data inside the launched widget</strong></p>
</div>
<div class="paragraph">
<p>Once a widget has been launched, the widget may need to retrieve the initial set of data from the previous step. This is accomplished by using the <code>OWF.Launcher.getLaunchData()</code> function. This function will return the initial data from the previous step. In the <code>ChannelListenerPanel.js</code> code sample below, the data retrieved is a JSON string. This string is then parsed into a JavaScript object by using the <code>OWF.Util.parseJson</code> function. In <code>ChannelListenerPanel.js</code> the initial data sent is a channel to start listening on (<code>data.channel</code>), and an initial message to display on that channel (<code>data.message</code>).</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">…
  render: function() {
    var launchConfig = OWF.Launcher.getLaunchData();
    if (launchConfig != null) {
      var data = OWF.Util.parseJson(launchConfig);
      if (data != null) {
        scope.subscribeToChannel(data.channel);
        scope.addToGrid(null,data.message,data.channel);
      }
    }
  },
…</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_additional_considerations_4">6.3. Additional Considerations</h3>
<div class="sect3">
<h4 id="find-a-widget">6.3.1. Alternative Ways to Find a Widget GUID</h4>
<div class="sect4">
<h5 id="_storing_a_widget_guid_as_a_preference">6.3.1.1. Storing a Widget GUID as a Preference</h5>
<div class="paragraph">
<p>An alternative way to determine which widget to launch is to store the GUID as a preference in the database using the Preferences API. The OWF Administration tools can be used to find the GUID of any widget. For the Channel Shouter/Channel Listener example, Channel Listener’s GUID can be found by editing the Channel Listener widget using the Widget Editor. This will bring up a dialog that displays the GUID. The GUID should be saved under a newly created preference. The widget can then retrieve that GUID and used accordingly.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">OWF.Preferences.getUserPreference({
    namespace: "owf.widget.ChannelShouter",
    name: "guid_to_launch",
    onSuccess: function(result) {
        const guid = result.value;
        // Do something with guid...
    },
    onFailure: function(err) { /* No op */ }
});</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_find_a_widget_by_its_universal_name">6.3.1.2. Find a Widget by its Universal Name</h5>
<div class="paragraph">
<p>Another way to determine which widget to launch is to search using its <em>universal name</em>. This can be done by querying the Preferences API using the <code>getWidget</code> function and including the <code>universalName</code> field in the parameters. This retrieves the specified widget’s configuration details, including its GUID.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">OWF.Preferences.getWidget({
    universalName: "org.owfwebsite.owf.examples.NYSE",
    onSuccess: function(result) {
        const guid = result.value;
        // Do something with guid...
    },
    onFailure: function(err) { /* No op */ }
});</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A widget’s <em>universal name</em> is defined in its descriptor file. See <a href="#creating-descriptors">Section 3.2.1, &#8220;Creating Descriptor Files for Widgets&#8221;</a> for details on descriptor files.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_regular_expression_to_change_a_widget_title">6.3.2. Using Regular Expression to Change a Widget Title</h4>
<div class="paragraph">
<p>The <code>launchWidget</code> function also accepts a <code>titleRegex</code> property.  This property will be used as a replacement regular expression to alter the title. This allows the current widget title to be changed in complex ways. The example below appends text to the widget’s title when it is launched.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">OWF.Launcher.launch({
  guid: someGuidVariable,
  title: "$1 - (Launched)",  // $1 represents the existing title
  titleRegex: /(.*)/,        // Matches and captures all text in the existing title
  launchOnlyIfClosed: false,
  data: someDataString
}, onLaunchFailure);</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_intents_api">7. Intents API</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_remote_procedure_call_rpc_api">8. Remote Procedure Call (RPC) API</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_6">8.1. Overview</h3>
<div class="paragraph">
<p>The Remote Procedure Call (RPC) API provides a method for direct, or point-to-point, interaction between widgets. This is different from the Eventing API, which allows widgets to globally publish messages or subscribe to a subset of globally published messages from any widget. In contrast, RPC follows a client-server model and the calls cannot be received by any widget other than the intended target. The "server" widget registers a list of functions with OWF which may then be called by "client" widget.  This process is facilitated by a widget proxy object, which exposes the registered functions on the server widget to the client widget.</p>
</div>
<div class="paragraph">
<p>OWF ships with two example widgets, the Color Server and Color Client, which demonstrate the functionality of the RPC API. In the tutorial below, simple versions of the Color Server and Color Client widgets will be recreated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tutorial_6">8.2. Tutorial</h3>
<div class="paragraph">
<p><strong>Step 1 - Create the Color Server widget HTML file</strong></p>
</div>
<div class="paragraph">
<p>Create the <code>ColorServer.html</code> file and add the following code:</p>
</div>
<div class="listingblock">
<div class="title">ColorServer.html</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;Color Server&lt;/title&gt;
    &lt;script type="application/javascript" src="./owf-widget.js"&gt;&lt;/script&gt;
    &lt;script type="application/javascript" src="ColorServer.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body id="body" style="background-color: white;"&gt;
    &lt;h1&gt;Color Server&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 2 - Register the Color Server RPC functions</strong></p>
</div>
<div class="paragraph">
<p>Create the <code>ColorServer.js</code> file and add the following code:</p>
</div>
<div class="listingblock">
<div class="title">ColorServer.js</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">document.addEventListener("DOMContentLoaded", function() {
    OWF.ready(start);
});

function start() {
    OWF.RPC.registerFunctions([
        {
            name: "getColors",
            fn: getColors
        }, {
            name: "changeColor",
            fn: changeColor
        }]
    );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The initial code waits for the page to load using the standard <code>DOMContentLoaded</code> event. Once the page is ready, the <code>OWF.ready</code> API method is used to wait for the widget to connect to the framework. When the widget is ready, the <code>start</code> callback function is executed.</p>
</div>
<div class="paragraph">
<p>The <code>start</code> function uses the <code>OWF.RPC.registerFunctions</code> API method to register a list of functions which will be made available to other widgets.</p>
</div>
<div class="paragraph">
<p><strong>Step 3 - Add the Color Server functionality</strong></p>
</div>
<div class="paragraph">
<p>Add the following code into the <code>ColorServer.js</code> file:</p>
</div>
<div class="listingblock">
<div class="title">ColorServer.js</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">function getColors() {
    return ["Red", "Blue", "Yellow"];
}

function changeColor(color) {
    document.getElementById("body").style.backgroundColor = color;
    return true;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>getColors</code> function returns a list of supported colors.</p>
</div>
<div class="paragraph">
<p>The <code>changeColor</code> function updates the background color of the widget, using the color <code>string</code> argument.</p>
</div>
<div class="paragraph">
<p>Using the <code>OWF.RPC.registerFunctions</code> API method described in the previous step, these functions will now be available for the Color Client to call.</p>
</div>
<div class="paragraph">
<p><strong>Step 4 - Create the Color Client widget HTML file</strong></p>
</div>
<div class="paragraph">
<p>Create the <code>ColorClient.html</code> file and add the following code:</p>
</div>
<div class="listingblock">
<div class="title">ColorClient.html</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;Color Client&lt;/title&gt;
    &lt;script type="application/javascript" src="./owf-widget.js"&gt;&lt;/script&gt;

    &lt;script type="application/javascript" src="ColorClient.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Color Client&lt;/h1&gt;
    &lt;button type="button" onclick="getColors()"&gt;List Colors&lt;/button&gt;
    &lt;select id="colors" onclick="setColor(this.value)"&gt;&lt;/select&gt;
    &lt;div&gt;&lt;/div&gt;
    &lt;div id="errors" style="color:red; font-weight:bold; display:none;"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 5 - Find the widget proxy</strong></p>
</div>
<div class="paragraph">
<p>Create the <code>ColorClient.js</code> file and add the following code:</p>
</div>
<div class="listingblock">
<div class="title">ColorClient.js</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">function getColorServerProxy(callback) {
    setError();

    OWF.getOpenedWidgets(function(widgets) {
        if (!widgets) {
            setError("Failed to get opened widgets");
            return;
        }

        const colorServerId = findWidgetIdByName(widgets, /^.*Color Server.*$/);
        if (!colorServerId) {
            setError("Color Server widget not found");
            return;
        }

        OWF.RPC.getWidgetProxy(colorServerId, function(proxy) {
            if (!proxy) {
                setError("Failed to get widget proxy for Color Server");
                return;
            }
            callback(proxy);
        });
    });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to call the registered RPC functions on the Color Server, the <code>OWF.RPC.getWidgetProxy</code> API method is be used to get a widget proxy instance. Since the widget ID is required, <code>OWF.getOpenedWidgets</code> is used to get the list of open widgets which is then searched using the below helper functions to find the Color Server.</p>
</div>
<div class="paragraph">
<p>Add the following code for the <code>findWidgetIdByName</code> and <code>setError</code> helper functions:</p>
</div>
<div class="listingblock">
<div class="title">ColorClient.js</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">function findWidgetIdByName(widgets, regexp) {
    for (let i = 0; i &lt; widgets.length; i++) {
        let widget = widgets[i];
        if (widget.id != null &amp;&amp; widget.name.match(regexp) != null) {
            return widget.id;
        }
    }
    return null;
}

function setError(message) {
    const errors = document.getElementById("errors");
    errors.style.display = message ? "block" : "none";
    errors.innerText = message || "";
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 5 - Call the Color Server RPC functions</strong></p>
</div>
<div class="paragraph">
<p>Add the following code into the <code>ColorClient.js</code> file:</p>
</div>
<div class="listingblock">
<div class="title">ColorClient.js</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">function getColors() {
    getColorServerProxy(function(colorServer) {
        colorServer.getColors(updateColorChoices);
    });
}

function setColor(color) {
    getColorServerProxy(function(colorServer) {
        colorServer.changeColor(color);
    });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the previously created <code>getColorServerProxy</code> function, the two registered functions are called to get the list of colors and to set a new selected color.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This example code purposely does not save the widget proxy between calls. If the widget is closed or otherwise becomes unavailable, the proxy would become invalid. Finding the widget and proxy "on-demand" ensures that the target widget is available to receive the RPC calls.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Finally, add the following to update the combo box with the new color options:</p>
</div>
<div class="listingblock">
<div class="title">ColorClient.js</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">function updateColorChoices(colors) {
    const selectBox = document.getElementById("colors");

    // Remove previous `option` elements
    for (let i = selectBox.options.length - 1; i &gt;= 0; i--) {
        selectBox.remove(i);
    }

    // Create an `option` element for each color
    for (let i = 0; i &lt; colors.length; i++) {
        const color = colors[i];
        const option = document.createElement("option");
        option.text = color;
        option.value = color;
        selectBox.add(option);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 6 - Start the web server</strong></p>
</div>
<div class="paragraph">
<p>Using the command line, navigate to the <code>node-server/</code> directory and run the following commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>npm install
npm start</pre>
</div>
</div>
<div class="paragraph">
<p>This will start the sample web server to statically host the widget files at <a href="http://localhost:5000/" class="bare">http://localhost:5000/</a>.</p>
</div>
<div class="paragraph">
<p><strong>Step 7 - Add the Color Server and Color Client widgets to OWF</strong></p>
</div>
<div class="paragraph">
<p>To test the RPC API functionality, the widgets must be run from within OWF. Add the new Color Server and modified Color Client widgets to OWF via the OWF Admin page. For details on how to do this, see <a href="#add-a-widget">Chapter 3, <em>Adding a Widget to OWF</em></a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_chrome_api_unsupported">9. Chrome API (Unsupported)</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The Chrome API is not currently supported in OWF v8.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_drag_drop_api_unsupported">10. Drag &amp; Drop API (Unsupported)</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The Drag &amp; Drop API is not currently supported in OWF v8.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logging_api_unsupported">11. Logging API (Unsupported)</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The Logging API is not currently supported in OWF v8.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is recommended that widget developers use the native Web browser logging capabilities, such as <code>console.log</code>, <code>console.warn</code>, and <code>console.error</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_state_api_unsupported">12. State API (Unsupported)</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The State API is not currently supported in OWF v8.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_glossary">Glossary</h2>
<div class="sectionbody">
<div class="dlist glossary">
<dl>
<dt>Accordion (layout)</dt>
<dd>
<p>Display widgets in equal, horizontal panes that do not scroll (each individual widget may scroll using its own scroll bar).</p>
</dd>
<dt>Affiliated Store</dt>
<dd>
<p>A store that another organization uses for their system. When a local store is connected to an affiliated store, users in the local store can search for and add listings from the affiliated store (assuming the user has proper authentication for the affiliated store).</p>
</dd>
<dt>App</dt>
<dd>
<p>Deprecated term for a Stack.</p>
</dd>
<dt>App Component</dt>
<dd>
<p>Deprecated term for a widget.</p>
</dd>
<dt>Dashboard</dt>
<dd>
<p>An organized collection of widgets with a customizable layout.</p>
</dd>
<dt>Filters</dt>
<dd>
<p>A feature used to reduce the number of search results by type or category.</p>
</dd>
<dt>Fit (layout)</dt>
<dd>
<p>Allows a user to place a single widget on the screen.</p>
</dd>
<dt>Help</dt>
<dd>
<p>Repository of instructional guides and video tutorials.</p>
</dd>
<dt>Intent</dt>
<dd>
<p>Instructions for carrying out a widget&#8217;s intentions.</p>
</dd>
<dt>Listing</dt>
<dd>
<p>Any software dashboard or widget that a user enters into the Store is called a "Listing." Listings can be a various types of Web content.</p>
</dd>
<dt>Marketplace</dt>
<dd>
<p>A searchable catalog of shared listings of widgets and dashboards (also referred to as the Store).</p>
</dd>
<dt>OWF</dt>
<dd>
<p>Abbreviation for Ozone Widget Framework.</p>
</dd>
<dt>Pages</dt>
<dd>
<p>Deprecated term for a dashboard.</p>
</dd>
<dt>Portal (layout)</dt>
<dd>
<p>A column-oriented layout that organizes widgets of varying heights. Each new widget loads above the first one on the screen. The user drags a dividing bar to specify widget’s height. The widgets and the Ozone window scroll.</p>
</dd>
<dt>Required Listings</dt>
<dd>
<p>An association between Listings. <em>Example: if Listing A needs Listing B to function, Listing B is a Required Listing.</em></p>
</dd>
<dt>Stack</dt>
<dd>
<p>A collection of Dashboards (pages). Allows administrators and users to group Dashboards into folder-like collections that allow for easy transition from one to another.</p>
</dd>
<dt>Store</dt>
<dd>
<p>Commonly used term for the Ozone Marketplace.</p>
</dd>
<dt>Tabbed (layout)</dt>
<dd>
<p>Display one widget per screen, with tabs the top of the screen to switch from one widget to another.</p>
</dd>
<dt>Toolbar</dt>
<dd>
<p>The navigation bar at the top of the application. It links to a user’s stacks, widgets, the Store, online Help and options from the drop-down User Menu.</p>
</dd>
<dt>User</dt>
<dd>
<p>A person signed into the Ozone application, usually referring to a person without administrative privileges.</p>
</dd>
<dt>Widget</dt>
<dd>
<p>A light-weight, single-purpose Web application that offers a summary or limited view of a larger Web application and may be configured by the user and displayed within a Dashboard.</p>
</dd>
<dt>Widget Menu</dt>
<dd>
<p>The Widgets Menu displays all available widgets. Use this feature to start or add widgets to a dashboard.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="war-deployment">Appendix A: Java WAR Deployment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_walkthrough">A.1. Walkthrough</h3>
<div class="paragraph">
<p><strong>Step 1 - Create the Servlet directory structure</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a project directory. (e.g. <code>webapp/</code>).<br></p>
<div class="paragraph">
<p>Web applications using Java and the Servlet specification follow a layout of directories and files. The root of the hierarchy defines the document root of the Web Application. In this walk-through, the root directory will be the <code>webapp/</code> directory.</p>
</div>
</li>
<li>
<p>Create the <code>WEB-INF/</code> directory under the <code>webapp/</code> directory.<br></p>
<div class="paragraph">
<p>All files under the project <code>webapp/</code> directory can be served to the client, except for files under the special directory <code>WEB-INF/</code>. The <code>WEB-INF/</code> directory is not part of the public document tree of the application, and may contain resources required for running the Web application.</p>
</div>
</li>
<li>
<p>Create the <code>web.xml</code> file in the <code>WEB-INF/</code> directory, and add the following:</p>
<div class="listingblock">
<div class="title">Example: webapp/WEB-INF/web.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="2.4"
         xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
         http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"&gt;
         &lt;display-name&gt;Announcing Clock Widget&lt;/display-name&gt;
&lt;/web-app&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Step 2 - Create the Announcing Clock widget</strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The complete example files are available under the <code>ozone/docs/developers_guide/examples/</code> directory.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create the following files in the <code>webapp/</code> directory:</p>
</div>
<div class="listingblock">
<div class="title">AnnouncingClock.html</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;Announcing Clock&lt;/title&gt;
    &lt;script type="application/javascript" src="./AnnouncingClock.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    The time is: &lt;span id="clock"&gt;&amp;nbsp;&lt;/span&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">AnnouncingClock.js</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">document.addEventListener("DOMContentLoaded", start);

function start() {
    updateClock();
    setInterval(updateClock, 1000);
}

function updateClock() {
    // Format the time portion of the current date
    const timeString = new Date().toLocaleTimeString();

    // Update the time display
    document.getElementById("clock").firstChild.nodeValue = timeString;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 3 - Create a .WAR file</strong></p>
</div>
<div class="paragraph">
<p>A <code>.war</code> file is a Web application compressed into a single file. While directories and files can be copied directly onto the Web server, it is easier and more common to use a WAR file.</p>
</div>
<div class="paragraph">
<p>To create the WAR file for the Announcing Clock Widget, open a command prompt and navigate to the previously created <code>webapp/</code> directory. Then, run the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>jar cvf announcing-clock.war</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 4 - Deploy the .WAR file to the server</strong></p>
</div>
<div class="paragraph">
<p>The deployment method used depends on the Web application server. For the prepackaged OWF Tomcat server, the process is as simple as copying the WAR file into the <code>tomcat/webapps/</code> directory on the Web application server. In the event that a particular application server has different requirements, the appropriate Java application server documentation should be consulted for information on how the WAR file should be deployed.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 8.0.0.0<br>
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>