<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="DOD GOSS">
<title>Ozone Configuration Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Ozone Configuration Guide</h1>
<div class="details">
<span id="author" class="author">DOD GOSS</span><br>
<span id="revnumber">version 8.0.0.0,</span>
<span id="revdate">2019-07-01</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_objectives">1.1. Objectives</a></li>
<li><a href="#_document_scope">1.2. Document Scope</a></li>
<li><a href="#_related_documents">1.3. Related Documents</a></li>
</ul>
</li>
<li><a href="#overview">2. Overview</a>
<ul class="sectlevel2">
<li><a href="#_purpose">2.1. Purpose</a></li>
<li><a href="#_dependencies">2.2. Dependencies</a></li>
<li><a href="#_components">2.3. Components</a>
<ul class="sectlevel3">
<li><a href="#_ozone_widget_framework_owf_web_application">2.3.1. Ozone Widget Framework (OWF) Web Application</a></li>
<li><a href="#_pluggable_security">2.3.2. Pluggable Security</a>
<ul class="sectlevel4">
<li><a href="#_example_security_configuration">2.3.2.1. Example Security Configuration</a>
<ul class="sectlevel5">
<li><a href="#_username_and_password_security_default">2.3.2.1.1. Username and Password Security (Default)</a></li>
<li><a href="#_certificate_only_x509_security">2.3.2.1.2. Certificate-only (X509) Security</a></li>
<li><a href="#_central_authentication_service_cas_security">2.3.2.1.3. Central Authentication Service (CAS) Security</a></li>
</ul>
</li>
<li><a href="#_additional_resources_owf_security_project">2.3.2.2. Additional Resources (OWF Security Project)</a></li>
</ul>
</li>
<li><a href="#_sample_widgets">2.3.3. Sample Widgets</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#installation">3. Installation</a>
<ul class="sectlevel2">
<li><a href="#_dependencies_2">3.1. Dependencies</a></li>
<li><a href="#_supported_browsers">3.2. Supported Browsers</a></li>
<li><a href="#_bundle_overview">3.3. Bundle Overview</a>
<ul class="sectlevel3">
<li><a href="#_bundle_contents">3.3.1. Bundle Contents</a></li>
<li><a href="#_running_the_application">3.3.2. Running the Application</a></li>
</ul>
</li>
<li><a href="#_default_installation">3.4. Default Installation</a></li>
<li><a href="#_custom_installation">3.5. Custom Installation</a></li>
</ul>
</li>
<li><a href="#database-config">4. Database Configuration</a>
<ul class="sectlevel2">
<li><a href="#_using_oracle">4.1. Using Oracle</a></li>
<li><a href="#_using_mysql">4.2. Using MySQL</a>
<ul class="sectlevel3">
<li><a href="#_configuring_mysql_jdbc_to_use_ssl">4.2.1. Configuring MySQL JDBC to use SSL</a>
<ul class="sectlevel4">
<li><a href="#_creating_mysql_certificates">4.2.1.1. Creating MySQL Certificates</a></li>
<li><a href="#_configure_mysql">4.2.1.2. Configure MySQL</a></li>
<li><a href="#_configure_the_franchise_store_bundle">4.2.1.3. Configure the Franchise Store Bundle</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_using_sql_server">4.3. Using SQL Server</a></li>
</ul>
</li>
<li><a href="#security">5. Security</a>
<ul class="sectlevel2">
<li><a href="#_overview">5.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_basic_security_concepts_and_owf">5.1.1. Basic Security Concepts and OWF</a></li>
<li><a href="#_production_deployments">5.1.2. Production Deployments</a></li>
</ul>
</li>
<li><a href="#_default_security_configuration">5.2. Default Security Configuration</a>
<ul class="sectlevel3">
<li><a href="#default-users-config">5.2.1. Adding Users, Roles, &amp; Groups</a></li>
</ul>
</li>
<li><a href="#_sample_security_modules">5.3. Sample Security Modules</a>
<ul class="sectlevel3">
<li><a href="#_installing_security_modules">5.3.1. Installing Security Modules</a></li>
<li><a href="#_x_509_certificate_pki_only">5.3.2. X.509 Certificate (PKI) Only</a>
<ul class="sectlevel4">
<li><a href="#_installing_user_certificates_pki">5.3.2.1. Installing User Certificates (PKI)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#configuration">6. Configuration</a>
<ul class="sectlevel2">
<li><a href="#_environments_settings">6.1. Environments settings</a></li>
<li><a href="#_grails">6.2. Grails</a></li>
<li><a href="#_security_settings">6.3. Security settings</a></li>
<li><a href="#_hibernate_settings">6.4. Hibernate settings</a></li>
<li><a href="#_quartz_settings">6.5. Quartz settings</a></li>
<li><a href="#_data_sources_settings">6.6. Data Sources settings</a></li>
<li><a href="#_server_settings">6.7. Server settings</a></li>
<li><a href="#_owf_settings">6.8. OWF settings</a>
<ul class="sectlevel3">
<li><a href="#_help_settings">6.8.1. Help settings</a>
<ul class="sectlevel4">
<li><a href="#_changing_the_location_of_help_files">6.8.1.1. Changing the location of help files</a></li>
<li><a href="#_custom_help_file_types">6.8.1.2. Custom Help file types</a></li>
</ul>
</li>
<li><a href="#_notification_settings">6.8.2. Notification settings</a></li>
<li><a href="#_custom_data_guard_and_widget_security">6.8.3. Custom Data Guard and Widget Security</a></li>
<li><a href="#_store_synchronization_settings">6.8.4. Store Synchronization settings</a>
<ul class="sectlevel4">
<li><a href="#_automatically_add_the_store_listings_and_updates">6.8.4.1. Automatically add the Store listings and updates</a></li>
<li><a href="#_enabling_auto_updates_from_the_store">6.8.4.2. Enabling Auto-Updates from the Store</a></li>
<li><a href="#_widget_load_times">6.8.4.3. Widget Load Times</a></li>
</ul>
</li>
<li><a href="#_custom_access_alert_settings">6.8.5. Custom Access Alert settings</a></li>
<li><a href="#_logout_settings">6.8.6. Logout settings</a></li>
<li><a href="#_auto_save_settings">6.8.7. Auto Save settings</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_logging">7. Logging</a>
<ul class="sectlevel2">
<li><a href="#_logging_configuration">7.1. Logging Configuration</a></li>
<li><a href="#audit-logging">7.2. Audit Logging</a>
<ul class="sectlevel3">
<li><a href="#_sign_in_events">7.2.1. Sign-in Events</a></li>
<li><a href="#_logout_events">7.2.2. Logout Events</a></li>
</ul>
</li>
<li><a href="#_common_event_format_cef_auditing">7.3. Common Event Format (CEF) Auditing</a></li>
</ul>
</li>
<li><a href="#upgrading">8. Upgrading</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_from_version_7_17_1_0">8.1. Upgrading from version 7.17.1.0</a></li>
<li><a href="#_connecting_to_omp_marketplace">8.2. Connecting to OMP (Marketplace)</a></li>
</ul>
</li>
<li><a href="#_deployment">9. Deployment</a>
<ul class="sectlevel2">
<li><a href="#_operating_owf_from_differentmultiple_ports">9.1. Operating OWF From Different/Multiple Ports</a></li>
<li><a href="#_adding_the_store_to_owf">9.2. Adding the Store To OWF</a></li>
<li><a href="#_server_certificate_creation_and_installation">9.3. Server Certificate Creation and Installation</a>
<ul class="sectlevel3">
<li><a href="#_generating_a_new_self_signed_server_certificate">9.3.1. Generating a New Self-Signed Server Certificate</a></li>
<li><a href="#_configuring_ozone_for_a_different_truststorekeystore">9.3.2. Configuring Ozone For a Different Truststore/Keystore</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_custom_security_modules">Appendix A: Custom Security Modules</a>
<ul class="sectlevel2">
<li><a href="#_requirements_for_customizing_security">A.1. Requirements for Customizing Security</a></li>
<li><a href="#_custom_security_classes">A.2. Custom Security Classes</a>
<ul class="sectlevel3">
<li><a href="#_owfuserdetails">A.2.1. OWFUserDetails</a></li>
<li><a href="#_owfuserdetailsimpl">A.2.2. OWFUserDetailsImpl</a></li>
<li><a href="#_owfgroup">A.2.3. OWFGroup</a></li>
<li><a href="#_owfgroupimpl">A.2.4. OwfGroupImpl</a></li>
<li><a href="#_grantedauthorityimpl">A.2.5. GrantedAuthorityImpl</a></li>
<li><a href="#_mydetailsservice">A.2.6. MyDetailsService</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_glossary">Glossary</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_objectives">1.1. Objectives</h3>
<div class="paragraph">
<p>This guide covers topics relevant to installing and configuring the Ozone Widget Framework (OWF).</p>
</div>
</div>
<div class="sect2">
<h3 id="_document_scope">1.2. Document Scope</h3>
<div class="paragraph">
<p>This guide is intended for OWF developers who wish to configure or customize an OWF instance.</p>
</div>
<div class="paragraph">
<p>For the purpose of this document, a developer is understood to be someone who is comfortable unpacking and packing WAR files and editing configuration files.</p>
</div>
<div class="paragraph">
<p>In this document, the term Store and Marketplace are used interchangeably.</p>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents">1.3. Related Documents</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Related Documents</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Document</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Quick Start Guide</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Walkthrough of basic OWF functions such as using widgets; unpacking the OWF bundle; setting up a local instance of OWF; installing security certificates; truststore and keystore configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>User&#8217;s Guide</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Understanding the OWF user interface; adding, deleting, modifying widgets and using intents; accessing and using the Store;using dashboards; creating, deleting, adding, switching, modifying dashboard pages; defining accessibility features such as high-contrast themes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Administrator&#8217;s Guide</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Understanding administrative tools: adding, deleting, and editing users, groups, widgets, and dashboards; creating default content for users, groups and group dashboards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Configuration Guide</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overview of basic architecture and security; OWF installation instructions; instructions for modifying default settings; database set up and logging guidance; framework and theme customization instructions; OWF upgrade instructions; directions for adding and deleting help content.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview">2. Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose">2.1. Purpose</h3>
<div class="paragraph">
<p>The Ozone Widget Framework (OWF) is a set of tools, generally delivered in the OWF Bundle. When deployed, OWF is used for organizing and displaying Web applications (widgets) in a single browser window known as an OZONE dashboard.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dependencies">2.2. Dependencies</h3>
<div class="paragraph">
<p>The OWF Bundle is shipped with Tomcat v8.5.23 and requires Java 8 or higher. If running OWF with a Web server other than Tomcat, see that Web server&#8217;s documentation for any additional requirements.</p>
</div>
</div>
<div class="sect2">
<h3 id="_components">2.3. Components</h3>
<div class="sect3">
<h4 id="_ozone_widget_framework_owf_web_application">2.3.1. Ozone Widget Framework (OWF) Web Application</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">owf.war</dt>
<dd>
<p>This file, located in the <code>/tomcat/webapps/</code> directory, contains the components which make up the OWF application. Whether a user logs in and accesses the framework, or an administrator logs in to modify preferences, the <code>owf.war</code> is the application that launches those pages to the browser.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_pluggable_security">2.3.2. Pluggable Security</h4>
<div class="paragraph">
<p>OWF allows an administrator to customize the type of security that will be implemented for user authentication and authorization.</p>
</div>
<div class="sect4">
<h5 id="_example_security_configuration">2.3.2.1. Example Security Configuration</h5>
<div class="paragraph">
<p>Included within the OWF bundle and framework <code>/tomcat/lib/ozone/framework/</code> is the default <code>security.xml</code> Spring configuration file, also within <code>/tomcat/lib/ozone/framework/security/</code> are additional example configurations files.</p>
</div>
<div class="paragraph">
<p>These default and example security files are intended ONLY as examples and should NOT be used in a production environment.</p>
</div>
<div class="paragraph">
<p>Please refer to the <a href="#security">Chapter 5, <em>Security</em></a> section of this guide for further details about OWF Security.</p>
</div>
<div class="sect5">
<h6 id="_username_and_password_security_default">2.3.2.1.1. Username and Password Security (Default)</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">security.xml</dt>
<dd>
<p>Contains the default sample security implementation that uses a login form requiring a username and password.</p>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="_certificate_only_x509_security">2.3.2.1.2. Certificate-only (X509) Security</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">security_cert-only.xml</dt>
<dd>
<p>Contains the sample certificate-only (X509) security implementation that uses PKI certificates for client authentication. If no authentication is provided, the user is denied access to the system.</p>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="_central_authentication_service_cas_security">2.3.2.1.3. Central Authentication Service (CAS) Security</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">security_cas-only.xml</dt>
<dd>
<p>Contains the sample CAS security implementation that uses an external authentication service for client authentication.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_additional_resources_owf_security_project">2.3.2.2. Additional Resources (OWF Security Project)</h5>
<div class="paragraph">
<p>For building custom security implementations, the <code>owf-security</code> project may be referenced or used a starting point. The source code for this project is available at the Ozone Platform organization GitHub repositories located at <a href="https://github.com/ozoneplatform/" class="bare">https://github.com/ozoneplatform/</a>.</p>
</div>
<div class="paragraph">
<p>In previous releases, these files were distributed in the bundle in the <code>ozone-security-project.zip</code> file. As described above, the <code>owf-security</code> project repository is the new location for the latest versions of these files.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sample_widgets">2.3.3. Sample Widgets</h4>
<div class="paragraph">
<p>A set of example widgets are provided with the system in order to demonstrate the functionality of the widget APIs.</p>
</div>
<div class="paragraph">
<p>The example widgets are enabled by default, and run embedded within the main application inside the <code>owf.war</code> file.</p>
</div>
<div class="paragraph">
<p>In previous OWF releases, an additional set of sample widgets utilizing various web technologies and frameworks was provided in the <code>owf-sample-widgets.zip</code> file. Due to the declining prevalence of these technologies, this file is no longer being distributed with the bundle. However, the sources for these sample widgets are still available within the <code>owf-framework</code> repository, located under the <code>/sample-widgets/</code> directory.</p>
</div>
<div class="paragraph">
<p>The OWF Developer&#8217;s Guide includes specific examples and guides regarding the developing widgets and utilizing the widget APIs.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation">3. Installation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_dependencies_2">3.1. Dependencies</h3>
<div class="paragraph">
<p>Listed below are the dependencies for OWF:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java 8 or higher.</p>
</li>
<li>
<p>A Relational Database Management System (RDBMS). OWF currently ships with an in-memory HyperSQL (HSQLDB) database for testing and development purposes, but it is expected that a live deployment will use a more robust RDBMS such as Oracle or MySQL.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_supported_browsers">3.2. Supported Browsers</h3>
<div class="paragraph">
<p>OWF is tested against the following browsers:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Supported Browsers</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Browser</th>
<th class="tableblock halign-left valign-top">Version(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Internet Explorer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt; 11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Edge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt; 44</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chrome</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt; 74</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Firefox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt; 60</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_bundle_overview">3.3. Bundle Overview</h3>
<div class="sect3">
<h4 id="_bundle_contents">3.3.1. Bundle Contents</h4>
<div class="paragraph">
<p>The distribution of OWF consists of a ZIP file containing the necessary components to set up and run OWF in a development environment. The bundle contains the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dbscripts/</code> – SQL scripts to create the database schema and the initial data.</p>
</li>
<li>
<p><code>docs/</code> – Copies of the application documentation and guides.</p>
</li>
<li>
<p><code>drivers/</code> – Example database drivers.</p>
</li>
<li>
<p><code>tomcat/</code> – The pre-configured Tomcat container. Includes the custom <code>start.bat</code> and <code>start.sh</code> scripts.</p>
</li>
<li>
<p><code>tomcat/certs/</code> – Sample server and user certificates for SSL and certificate-based authentication</p>
</li>
<li>
<p><code>tomcat/conf/</code> – Tomcat configuration files.</p>
</li>
<li>
<p><code>tomcat/lib/</code> – Files to include in the Tomcat Java classpath.</p>
</li>
<li>
<p><code>tomcat/lib/config/</code> – Example OWF configuration files for the supported databases.</p>
</li>
<li>
<p><code>tomcat/lib/ozone/framework/</code> – Externalized OWF configuration files, including custom security configuration.</p>
</li>
<li>
<p><code>tomcat/webapps/owf.war</code> – The OWF web application WAR file.</p>
</li>
<li>
<p><code>owf-jboss-modules.zip</code> – Sample JBoss modules for deployment onto a JBoss container.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_running_the_application">3.3.2. Running the Application</h4>
<div class="paragraph">
<p>The following example shows how an administrator might copy, unzip and start Ozone from the bundle deployment on *nix operating systems, assuming the bundle is named <code>ozone-framework-8.0.0.0.zip</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cp ozone-framework-8.0.0.0.zip /opt
cd /opt
unzip ozone-framework-8.0.0.0.zip
cd tomcat
./start.sh</pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows how an administrator might copy, unzip, and start OWF from the bundle on Windows operating systems, assuming the bundle is named <code>ozone-framework-8.0.0.0.zip</code>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new directory (for example, <code>C:\owf\</code>) from where OWF will be run. This can be done via the Windows UI or a command prompt.</p>
</li>
<li>
<p>Copy <code>ozone-framework-8.0.0.0.zip</code> to the new directory created in step 1.</p>
</li>
<li>
<p>Right-click on <code>ozone-framework-8.0.0.0.zip</code> and select Open, Explore, or the command for the system&#8217;s default zip/unzip program.</p>
</li>
<li>
<p>Unzip/unpack the bundle into the new directory created in step 1.</p>
</li>
<li>
<p>From a command-line, run <code>start.bat</code> from within the <code>C:\owf\tomcat\</code> directory.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The use of the bundled deployment archive provides all of the necessary mechanisms to deploy and run the Tomcat Web container on any Java 8+ enabled system.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_default_installation">3.4. Default Installation</h3>
<div class="paragraph">
<p>Running the OWF Bundle via the included Tomcat web server with the default values requires minimal installation and configuration. When using this standard configuration, OWF uses the default security module which provides a simple username and password login form for authentication.</p>
</div>
<div class="paragraph">
<p>The application uses a keystore and a truststore which are local to the installation. There is no need to install any certificates into the server&#8217;s Java installation. However, the default certificates contained in the OWF Bundle only function for localhost communications. When accessed from a remote machine with a name that differs from localhost while using the included certificates, OWF will not function correctly. Accordingly, see the Server Certificate Creation and Installation section below for information about creating additional certificates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom_installation">3.5. Custom Installation</h3>
<div class="paragraph">
<p>OWF can be customized to run in a variety of environments.</p>
</div>
<div class="paragraph">
<p>To configure an external database, see <a href="#database-setup">[database-setup]</a>.</p>
</div>
<div class="paragraph">
<p>To configure security settings or install a security module, see <a href="#security">Chapter 5, <em>Security</em></a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="database-config">4. Database Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While the full extent of administering databases is outside the scope of this guide, this section provides information on how to work with databases for OWF.</p>
</div>
<div class="paragraph">
<p><code>application.yml</code> is a configuration file that allows an administrator to modify database connectivity information. It is located in the <code>/tomcat/lib/ozone/framework</code> directory. Once changes are made, restart OWF to apply them.</p>
</div>
<div class="paragraph">
<p>Listed below are the variable database elements that need to be modified to customize the OWF database. A detailed explanation of each field follows in <a href="#database-properties">Table 3, &#8220;OWF Externalized Database Properties&#8221;</a>.</p>
</div>
<div class="listingblock">
<div class="title">application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">dataSource:
    dbCreate: "none"
    username: "sa"
    password: ""
    driverClassName: "org.hsqldb.jdbcDriver"
    url: "jdbc:hsqldb:file:prodDb;shutdown=true"
    pooled: true
    properties:
        minEvictableIdleTimeMillis: 180000
        timeBetweenEvictionRunsMillis: 180000
        numTestsPerEvictionRun: 3
        testOnBorrow: true
        testWhileIdle: true
        testOnReturn: true
        validationQuery: "SELECT 1 FROM INFORMATION_SCHEMA.SYSTEM_USERS"</code></pre>
</div>
</div>
<table id="database-properties" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. OWF Externalized Database Properties</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Purpose</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbCreate</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether the database schema is created and/or updated when the server is started.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Use the appropriate database creation script in the dbscript directory before running OWF if set this option is set to <code>none</code>.
</td>
</tr>
</table>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>none</code> / <code>create</code> / <code>update</code></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>username</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The username for the database connection</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>admin</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>password</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The password for the database connection</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>password</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>driverClassName</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The fully-qualified class name of the JDBC driver</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.hsqldb.jdbcDriver</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>JDBC Connection String</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jdbc:hsqldb:file:prodDb; shutdown=true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pooled</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether database connection pooling is enabled.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minEvictableIdleTimeMillis</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The minimum amount of time (in milliseconds) an object can be idle in the pool before becoming eligible for eviction.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>18000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeBetweenEvictionRunsMillis</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The time (in milliseconds) to sleep between runs of the idle object evictor thread.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>18000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>numTestsPerEvictionRun</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of objects to be examined on each run of the idle evictor thread.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>testOnBorrow</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether objects are validated before borrowed from the pool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>testWhileIdle</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether objects are validated by the idle object evictor thread.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>testOnReturn</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether objects are validated before returned to the pool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validationQuery</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validation query, used to test connections before use.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Syntax varies by database, see the examples included in this document.
</td>
</tr>
</table>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT 1 FROM INFORMATION_SCHEMA.SYSTEM_USERS</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When setting up databases for OWF, be mindful of the database&#8217;s lexical sorting mechanism. For some instances of OWF, with a small handful of users, this may not be much of an issue, but as the database becomes more populated, sorting may become increasingly difficult to manage.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_using_oracle">4.1. Using Oracle</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create an Oracle database user for OWF. It is recommended that there be a dedicated user for OWF to avoid database object name collisions. The OWF team recommends using UTF-8 encoding.</p>
</li>
<li>
<p>Due to licensing issues, OWF does not provide a JDBC driver for Oracle. Obtain the appropriate JDBC driver and place it into the Web server&#8217;s classpath. For example, if running Tomcat, the driver can be placed in the <code>/tomcat/lib/</code> directory.</p>
</li>
<li>
<p>Open the <code>/tomcat/lib/ozone/framework/application.yml</code> file and modify the <code>environments.production.dataSource</code> section using the values that are appropriate for the OWF environment.</p>
<div class="listingblock">
<div class="title">Example: application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">dataSource:
    pooled: true
    dbCreate: "none"
    username: "owf_user"
    password: "owf_password"
    dialect: "org.hibernate.dialect.Oracle10gDialect"
    driverClassName: "oracle.jdbc.driver.OracleDriver"
    url: "jdbc:oracle:thin:@myhost.somewhere.org:1521:DEVDB1"
    properties:
        minEvictableIdleTimeMillis: 180000
        timeBetweenEvictionRunsMillis: 180000
        numTestsPerEvictionRun: 3
        testOnBorrow: true
        testWhileIdle: true
        testOnReturn: true
        validationQuery: "SELECT 1 FROM DUAL"</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, an Oracle database-user named <code>owf_user</code> with a password of <code>owf_password</code> is used for a database named <code>DEVDB1</code>.</p>
</div>
<div class="paragraph">
<p>There are several different types of Oracle drivers (thin, OCI, kprb) and connection options (service, SID, TNSName) available. Please consult the Oracle DBA and Oracle&#8217;s JDBC documentation to create the connection most appropriate for the installed environment.</p>
</div>
</li>
<li>
<p>To create the schema, run the <code>/dbscripts/oracle/OracleCreate.sql</code> script, prior to starting OWF.</p>
</li>
<li>
<p>Ensure that the transaction is committed.</p>
</li>
</ol>
</div>
<h7 id="_notes" class="discrete">Notes:</h7>
<div class="ulist">
<ul>
<li>
<p>If running a production environment, no additional steps are necessary. However, if sample widgets are to be installed, <code>OraclePrefsUpdate_v7.14.0.sql</code> must be run prior to logging in. Logging in between the execution of these scripts can cause system failure.</p>
</li>
<li>
<p>The OWF team is aware of a known issue with the Oracle Web-based Admin Console returning truncated characters when dealing with large data sets. Accordingly, using SQLPlus to run the script mentioned above is recommended.</p>
</li>
<li>
<p>Old versions of the SQL scripts are included under <code>/database/archive</code>. These are included for the convenience of those upgrading from older versions of OWF.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_using_mysql">4.2. Using MySQL</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a schema within MySQL for use with OWF. It is recommended that there be a dedicated schema for OWF to avoid database object name collisions. The OWF team recommends using UTF-8 encoding.</p>
</li>
<li>
<p>Create a MySQL user with full access to the OWF schema created above.</p>
</li>
<li>
<p>OWF does not provide a JDBC driver for MySQL. Obtain the appropriate JDBC driver and place it into the Web server&#8217;s classpath. For example, if running Tomcat, the driver can be placed in the <code>/tomcat/lib/</code> directory.</p>
</li>
<li>
<p>Open the <code>/tomcat/lib/ozone/framework/application.yml</code> file and modify the <code>environments.production.dataSource</code> section using the values that are appropriate for the OWF environment.</p>
<div class="listingblock">
<div class="title">Example: application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">dataSource:
    pooled: true
    dbCreate: "none"
    driverClassName: "com.mysql.jdbc.Driver"
    url: "jdbc:mysql://myhost.somewhere.org/owf"
    username: "owf_user"
    password: "owf_password"
    dialect: "org.hibernate.dialect.MySQL5InnoDBDialect"
    properties:
        minEvictableIdleTimeMillis: 180000
        timeBetweenEvictionRunsMillis: 180000
        numTestsPerEvictionRun: 3
        testOnBorrow: true
        testWhileIdle: true
        testOnReturn: true
        validationQuery: "SELECT 1"</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, a MySQL database user named <code>owf_user</code> with a password of <code>owf_password</code> is used, for a database named <code>owf</code>. The dialect <code>org.hibernate.dialect.MySQL5InnoDBDialect</code> will use the InnoDB engine which is recommended for interactive web apps and explicitly used as the engine on OWF create and upgrade scripts.</p>
</div>
</li>
<li>
<p>To create the schema, run the <code>/dbscripts/mysql/MySqlCreate.sql</code> script, prior to starting OWF.</p>
</li>
</ol>
</div>
<h7 id="_notes_2" class="discrete">Notes:</h7>
<div class="ulist">
<ul>
<li>
<p>If manually creating the database objects, be sure to modify the SQL script (mentioned above) with the appropriate schema name.</p>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre>use owf;</pre>
</div>
</div>
</li>
<li>
<p>If running a production environment, no additional steps are necessary. However, if sample widgets are to be installed, <code>MySqlPrefsUpdate_v7.14.0.sql</code> must be run prior to logging in. Logging in between the execution of these scripts can cause system failure.</p>
</li>
<li>
<p>Old versions of the SQL scripts are included under <code>/database/archive</code>. These are included for convenience for people upgrading from older versions of OWF.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_configuring_mysql_jdbc_to_use_ssl">4.2.1. Configuring MySQL JDBC to use SSL</h4>
<div class="paragraph">
<p>By default MySQL communicates over an unencrypted connection - however, in most cases, it can be configured to use SSL. This is somewhat implementation specific.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This capability completely depends on how the MySQL binaries were compiled, packaged, etc.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following procedure covers how to configure an SSL capable MySQL server to work with an OWF bundle. The starting point for the server implementation used in this example is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Operating System: CentOS 6.4, 64 bit minimal installation (no updates were applied)</p>
</li>
<li>
<p>MySQL Server v5.1.69 (achieved by installing the "mysql-server" package with yum)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This procedure was developed from the MySQL 5.1 documentation, specifically the following sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using SSL for Secure Connections – <a href="http://dev.mysql.com/doc/refman/5.1/en/ssl-connections.html" class="bare">http://dev.mysql.com/doc/refman/5.1/en/ssl-connections.html</a></p>
</li>
<li>
<p>Connector/J (JDBC) Reference – <a href="http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference.html" class="bare">http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference.html</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This procedure relies on self-signed certificates. It is for testing and demonstration purposes only. The following three sections explain the configuration steps:</p>
</div>
<div class="sect4">
<h5 id="_creating_mysql_certificates">4.2.1.1. Creating MySQL Certificates</h5>
<div class="paragraph">
<p>The following steps guide a developer through creating the CA and Server certificates for a MySQL server:</p>
</div>
<h7 id="_step_1_create_the_ca_key_and_certificate" class="discrete">Step 1: Create the CA key and certificate</h7>
<div class="paragraph">
<p>From a shell prompt on a MySQL server, type the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>openssl genrsa 2048 &gt; ca-key.pem

openssl req -new -x509 -nodes -days 365 -key ca-key.pem -out cacert.pem</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
After the second command, the system prompts the developer to provide basic identity information. For the purpose of this demonstration, it is not important what information the developer provides here. However, it will be necessary to provide the same information in the next step.
</td>
</tr>
</table>
</div>
<h7 id="_step_2_create_the_server_certificate" class="discrete">Step 2: Create the server certificate</h7>
<div class="paragraph">
<p>From a shell prompt on your MySQL server, type the following commands. After the first command, the developer will again be prompted to provide identity information. The developer must provide the same information that they provided in Step 1. However, when prompted for the Common Name, provide the MySQL server&#8217;s hostname (e.g. mysql.mydomain.com).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>openssl req -newkey rsa:2048 -days 365 -nodes -keyout server-key.pem -out server-req.pem

openssl rsa -in server-key.pem -out server-key.pem

openssl x509 -req -in server-req.pem -days 365 -CA cacert.pem -CAkey ca-key.pem -set_serial 01 -out server-cert.pem</pre>
</div>
</div>
<h7 id="_step_3_consolidate_the_output_from_the_previous_steps" class="discrete">Step 3: Consolidate the output from the previous steps</h7>
<div class="paragraph">
<p>Copy the following files (produced in the preceding two steps) to a location where at a minimum the MySQL user has read access. In this example, it is <code>/etc/ssl/certs/</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cacert.pem</code></p>
</li>
<li>
<p><code>server-key.pem</code></p>
</li>
<li>
<p><code>server-cert.pem</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_configure_mysql">4.2.1.2. Configure MySQL</h5>
<h7 id="_step_1_edit_my_cnf" class="discrete">Step 1: Edit my.cnf</h7>
<div class="paragraph">
<p>Edit the MySQL configuration file. For this example, the file is located at <code>/etc/my.cnf</code>. Add the lines shown in bold to the <code>[mysqld]</code> section of the file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ssl-ca=/etc/ssl/certs/cacert.pem
ssl-cert=/etc/ssl/certs/server-cert.pem
ssl-key=/etc/ssl/certs/server-key.pem</pre>
</div>
</div>
<h7 id="_step_2_restart_mysql" class="discrete">Step 2: Restart MySQL</h7>
<div class="paragraph">
<p>Run the following command (or its equivalent) to restart the MySQL server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo service mysqld restart</pre>
</div>
</div>
<h7 id="_step_3_create_the_mysql_franchise_store_schema" class="discrete">Step 3: Create the MySQL franchise store schema</h7>
<div class="paragraph">
<p>At a minimum, create the schema and assign permissions as you would normally, following the steps in section Adding Users/Roles/Groups. This will leave the choice of using an encrypted connection up to the connecting client. To enforce the use of SSL from the database server side, add <code>REQUIRE SSL</code> to the end of the grant statement where user permissions to the Franchise Store schema are assigned.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre>GRANT ALL ON franchise.* TO 'franchise'@'storehost.mydomain.com' IDENTIFIED BY 'franchise' REQUIRE SSL;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_configure_the_franchise_store_bundle">4.2.1.3. Configure the Franchise Store Bundle</h5>
<h7 id="_step_1_modify_application_yml" class="discrete">Step 1: Modify application.yml</h7>
<div class="paragraph">
<p>Add <code>useSSL=true</code> to the <code>environments.production.dataSource.url</code> configuration. This can also be enforced from the client side with the <code>requireSSL</code> option.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre>dataSource:
    url: "jdbc:mysql://192.168.56.11/franchise?useSSL=true&amp;requireSSL=true&amp;trustCertificateKeyStoreUrl=file://$/{System.properties['javax.net.ssl.trustStore']}&amp;trustCertificateKeyStorePassword=changeit"""</pre>
</div>
</div>
<h7 id="_step_2_modify_the_application_trust_store" class="discrete">Step 2: Modify the application trust store</h7>
<div class="paragraph">
<p>Add the CA certificate, created above (<code>cacert.pem</code>) to the application&#8217;s trust store. In the case of the franchise bundle, the trust store is a file called <code>keystore.jks</code> found in the <code>/tomcat/certs/</code> directory. Do this with the following command (assuming you have the JDK installed and <code>JAVA_HOME/bin</code> on your PATH, if they aren&#8217;t there, add them first).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>keytool -import -alias mysqlCAcert -file cacert.pem -keystore keystore.jks</pre>
</div>
</div>
<h7 id="_step_3_start_the_application" class="discrete">Step 3: Start the Application</h7>
<div class="listingblock">
<div class="content">
<pre>./start.sh</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_sql_server">4.3. Using SQL Server</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new SQL Server database for use with OWF.</p>
</li>
<li>
<p>Create a SQL Server user with full access to the OWF database created above.</p>
</li>
<li>
<p>OWF does not provide a JDBC driver for SQL Server. Obtain the appropriate JDBC driver and place it on the Web server&#8217;s classpath. For example, if running Tomcat, the driver can be placed in the <code>/tomcat/lib/</code> directory.</p>
</li>
<li>
<p>Open the <code>/tomcat/lib/ozone/framework/application.yml</code> file and modify the environments.production.dataSource section using the values that are appropriate for the OWF environment.</p>
<div class="listingblock">
<div class="title">Example: application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">dataSource:
    pooled: true
    dbCreate: "none"
    username: "owf_user"
    password: "owf"
    driverClassName: "net.sourceforge.jtds.jdbc.Driver"
    url: "jdbc:jtds:sqlserver://localhost:1443/OWF"
    dialect: "ozone.owf.hibernate.OWFSQLServerDialect"
    properties:
        minEvictableIdleTimeMillis: 180000
        timeBetweenEvictionRunsMillis: 180000
        numTestsPerEvictionRun: 3
        testOnBorrow: true
        testWhileIdle: true
        testOnReturn: true
        validationQuery: "SELECT 1"</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above the SQL Server database user named <code>owf_user</code> with password of <code>owf</code> is used, to access a database named <code>OWF</code>.</p>
</div>
</li>
<li>
<p>Before starting OWF, run the following scripts to create the database schema:<br>
<code>/dbscripts/sqlserver/SQLServerCreate.sql</code></p>
</li>
<li>
<p>To load the initial sample data into the database:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open Microsoft SQL Server Management Studio (or another database editing tool) and select File → Open File</p>
</li>
<li>
<p>Navigate to <code>/dbscripts/archive/SQLServerPrefsUpdate_v7.0.0.sql</code> in the bundle.<br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This script should ONLY be run against an empty database as it will delete pre-existing data.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Select the OWF database, and execute the script.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<h7 id="_notes_3" class="discrete">Notes:</h7>
<div class="ulist">
<ul>
<li>
<p>Old versions of the SQL scripts are included under <code>/database/archive/</code>. These are included for convenience for people upgrading from older versions of OWF.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security">5. Security</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview">5.1. Overview</h3>
<div class="paragraph">
<p>OWF allows an administrator to customize the type of security that is implemented for authentication and authorization.</p>
</div>
<div class="paragraph">
<p>OWF uses a pluggable security solution based on Spring Security 4.x and ships with sample security plugins that can be used as a basis for building a custom security plugin.</p>
</div>
<div class="paragraph">
<p>Familiarity with Spring Security (<a href="https://spring.io/projects/spring-security" class="bare">https://spring.io/projects/spring-security</a>) will help administrators customize OWF.</p>
</div>
<div class="sect3">
<h4 id="_basic_security_concepts_and_owf">5.1.1. Basic Security Concepts and OWF</h4>
<div class="paragraph">
<p>While this guide is not intended as a comprehensive guide to basic security concepts, Web security, or Spring Security, there are a few key concepts that must be understood in order to use the sample OWF security plugins and the OWF security plugin architecture.</p>
</div>
<div class="paragraph">
<p>First are the concepts of authentication and authorization, known colloquially as auth &amp; auth. Authentication essentially means providing proof that the user is exactly who they are presenting themselves to be. Some authentication techniques include a username/password combination, an X509 certificate, a CAC card and card reader, or various biometric solutions. Authorization, on the other hand, is determining the specific access rights that an individual user should have. Consider the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"Bill is allowed to log into the system – prove that you are Bill," is a matter of authentication.</p>
</li>
<li>
<p>"Bill has access to resources," is a question of authorization.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By necessity, authentication occurs before authorization. Once authentication is satisfied, OWF moves to authorize. OWF has two authorization concepts at this time. First, OWF needs to know whether or not a user has OWF administrative access via ROLE_ADMIN or is only a regular user, via ROLE_USER. Administrative access provides a user access to the administrative widgets and the administrative console. Regular users have access only to the framework and their assigned dashboards.</p>
</div>
<div class="paragraph">
<p>Second, OWF needs to know what external OWF user groups (if any) the user has been assigned. There are two kinds of user groups; automatic user groups, which are pulled in from an external authorization source, such as LDAP or a configuration file, and manual user groups, which are set up from within OWF. If an automatic user group is new to OWF, all of the automatic user groups' details such as description, active/inactive status, contact email address, and name come from the external source. But after the initial creation of the group in OWF, no further updates to the description, status, etc. are made.</p>
</div>
</div>
<div class="sect3">
<h4 id="_production_deployments">5.1.2. Production Deployments</h4>
<div class="paragraph">
<p>The samples included with OWF are <strong>NOT</strong> production-quality samples. They are intended to provide examples on how to easily integrate various security solutions with OWF, not to provide a comprehensive security solution out of the box or a comprehensive tutorial on Spring Security.</p>
</div>
<div class="paragraph">
<p>It is expected that each organization using OWF will examine its security guidelines and enterprise-wide authentication/authorization solutions and produce an OWF security plugin that is both secure and meets its standards. That solution can then be shared among OWF deployments within the organization.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_default_security_configuration">5.2. Default Security Configuration</h3>
<div class="paragraph">
<p>The OWF Bundle is configured to run by default on <code>localhost</code> with a predefined set of users.</p>
</div>
<div class="paragraph">
<p>When using the default Tomcat bundle, externalized configuration files should be placed in the <code>/tomcat/lib/ozone/framework/</code> directory.  If using an application server other than Tomcat, copy the override files into the directory that will include them in the classpath for that specific application server.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The sample security modules are included as examples and should NOT be used in a production environment. For more information, please refer to the OWF Security section.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To add users to any security module using certificate authentication, generate a user PKI certificate that can be recognized by OWF.</p>
</div>
<div class="sect3">
<h4 id="default-users-config">5.2.1. Adding Users, Roles, &amp; Groups</h4>
<div class="paragraph">
<p>The addition of users, groups, and roles into OWF depends on the choice of security implementation. The following example outlines the procedures for adding users, groups, and roles when using the sample security configurations.</p>
</div>
<div class="paragraph">
<p>By default, authorization credentials are validated by the sample <code>MyDetailsService</code>. This example service is pre-configured to read the user information from the <code>/tomcat/lib/ozone/framework/users.properties</code> file.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The default <code>MyDetailsService</code> will not automatically create database entries for users. If a new user is added to the <code>users.properties</code> file, a corresponding user record must be manually added to the database.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit <code>/tomcat/lib/ozone/framework/users.properties</code><br></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">testUser1=password,ROLE_USER,Test User 1,[group1;I am a sample Group 1 from users.properties;test@gmail.com;active]
testUser2=password,ROLE_USER,Test User 2
testUser3=password,ROLE_USER,Test User 3
testAdmin1=password,ROLE_ADMIN,Test Admin 1,[group1;I am a sample Group 1 from users.properties;test@email.com;active],[group2;I am a sample Group 2 from users.properties;test2@email.com;active],[group3;I am a sample Group 3 from users.properties;test3@email.com;inactive]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To include space characters in the user names, escape the space characters using the <code>\</code> character.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Add users to the file in accordance with the following rules:</p>
<div class="ulist">
<ul>
<li>
<p>Data Format:<br>
<code>username=password,role,display name,[group name;group description;group contact email;active/inactive]</code></p>
</li>
<li>
<p>All of the information for a single user, including group information, should be on a single line.</p>
</li>
<li>
<p>Multiple groups may be delimited by commas.</p>
</li>
<li>
<p>Group information is optional and may be left out for any single user.</p>
</li>
<li>
<p>Once a group has been created for the first time, the description, contact email, and active/inactive status will not effect those values within OWF – that information must be managed through the OWF Group Manager administrative widget.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Save the file and restart the OWF server.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Any changes (additions, deletions, or modifications) to the <code>users.properties</code> will only take effect once the OWF server has been restarted.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a custom web server or application container is being used along with the provided example security, the <code>users.properties</code> file can be copied to any directory that is on the classpath of the Web server in use. For example, if using Jetty, the file can be copied to the <code>/jetty/resources/</code> directory.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sample_security_modules">5.3. Sample Security Modules</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Most of the examples provided contain various obvious security hazards -– for example, the <code>users.properties</code> file contains a list of usernames, roles, and user groups on the hard drive in plain text in a properties file. <strong>These are undeniable security hazards.</strong> Keep this in mind when using the samples.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_installing_security_modules">5.3.1. Installing Security Modules</h4>
<div class="paragraph">
<p>The OZONE-security files offer multiple examples of security options. <strong>These are intended as examples and should in no way be used in a production environment.</strong></p>
</div>
<div class="paragraph">
<p>For each available security option, there is a specific XML file which must be installed. Installing a new security module is accomplished in just a few simple steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the application server.<br>
An administrator can accomplish this by running the ozone/tomcat/bin/shutdown.bat or /shutdown.sh file, depending on the operating system in use.</p>
</li>
<li>
<p>Edit the application.xml file located in ozone/tomcat/lib/ozone/framework/<br>
Modify the &lt;import resources="security/security.xml"/&gt; line to point to the desired security configuration file.</p>
</li>
<li>
<p>Restart the application server by running either the ozone/tomcat/start.bat or /start.sh file, depending on the operating system in use.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_x_509_certificate_pki_only">5.3.2. X.509 Certificate (PKI) Only</h4>
<div class="paragraph">
<p>The <code>ozone/tomcat/lib/ozone/framework/examples/security_cert-only.xml</code> file eliminates the login form authentication. If the user does not present a valid X.509 certificate, they will be denied access to the system.</p>
</div>
<div class="paragraph">
<p>To use this security plugin:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the application server.</p>
</li>
<li>
<p>Edit the <code>application.xml</code> file located in <code>ozone/tomcat/lib/ozone/framework/</code></p>
<div class="ulist">
<ul>
<li>
<p>Modify the <code>&lt;import resources="security/security.xml"/&gt;</code> line to point to the certificate-only configuration.<br>
<em>Example: <code>&lt;import resources="security/security_cert-only.xml"/&gt;</code></em></p>
</li>
</ul>
</div>
</li>
<li>
<p>Edit the <code>server.xml</code> file located in <code>ozone/tomcat/conf/</code></p>
<div class="ulist">
<ul>
<li>
<p>Set the HTTPS-enabled <code>Connector</code> element <code>clientAuth</code> property to <code>"true"</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Restart the application server by running either the <code>ozone/tomcat/start.bat</code> or <code>/start.sh</code> file, depending on the operating system in use.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Example: application.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-4.3.xsd"&gt;

    &lt;import resource="session-control.xml"/&gt;
    &lt;import resource="security/security-cert_only.xml"/&gt;

&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_installing_user_certificates_pki">5.3.2.1. Installing User Certificates (PKI)</h5>
<div class="paragraph">
<p>In order to use certificate-based authentication, both the server and clients must be configured with the appropriate certificates. Sample certificates are included in the bundle under the <code>tomcat/certs/</code> directory.</p>
</div>
<div class="paragraph">
<p>These default client certificates can be used by importing the included <code>testUser1.p12</code> or <code>testAdmin1.p12</code> certificate into the user&#8217;s browser.</p>
</div>
<div class="paragraph">
<p>The <code>testUser1</code> certificate grants regular user permissions to use the application, while the <code>testAdmin1</code> certificate grants both regular user administrator permissions. The private key password for both certificates is <code>password</code>.</p>
</div>
<div class="paragraph">
<p>Please refer to the <strong>Ozone Quick Start Guide</strong> for detailed instructions on importing the user certificates into a web browser.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration">6. Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OWF offers a variety of custom configuration options in the externalized <code>application.yml</code> configuration file, located in the bundle in the <code>/tomcat/lib/ozone/framework/</code> directory. Once changes are made, restart the system to apply the changes.</p>
</div>
<div class="paragraph">
<p>The default settings provided in the <code>application.yml</code> file are intended for use in a local, non-production environment. For production deployment to a non-local environment or to use an external database, this file must be configured with the appropriate settings, which are explained the following sections.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In previous versions of OWF, the <code>OwfConfig.xml</code> file housed many of the application&#8217;s customizable values. Beginning with OWF 7.17.2, these values have been moved to the <code>application.yml</code> file described below.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_environments_settings">6.1. Environments settings</h3>
<div class="paragraph">
<p>The <code>environments</code> section of the <code>application.yml</code> file contains environment-specific settings which override the top-level configuration sections.</p>
</div>
<div class="paragraph">
<p>This section is optional; any sub-sections here may be copied to the top-level if no alternate environment configurations are desired. However, it may be used to enable quickly switching settings such as server hosting locations or databases for multiple environments such as testing, development, staging, or production.</p>
</div>
<div class="paragraph">
<p>The provided example <code>application.yml</code> uses these environment-specific blocks for some configuration settings. In the following guide, if the referenced section can not be found as a top-level section, check the <code>environments</code> section for the corresponding sub-section.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">environments:
    development:
        server:
            # Development `server` settings

    production:
        server:
            # Production `server` settings

        dataSource:
            # Production `dataSource` settings</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_grails">6.2. Grails</h3>
<div class="paragraph">
<p>The <code>grails</code> section of the <code>application.yml</code> file contains configuration specific to the Grails web framework.</p>
</div>
<div class="listingblock">
<div class="title">Example: application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">grails:
    cache:
        ehcache:
            ehcacheXmlLocation: 'classpath:ozone/framework/ehcache.xml'
            lockTimeout: 200
    resources:
        cachePeriod: 600
    cors:
        enabled: true</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>grails.cache.ehcache.ehcacheXmlLocation</code></dt>
<dd>
<p><em>string</em>&#8201;&#8212;&#8201;Location of the Ehcache XML configuration file.</p>
</dd>
<dt class="hdlist1"><code>grails.resources.cachePeriod</code></dt>
<dd>
<p><em>number</em>&#8201;&#8212;&#8201;Enables caching of the static assets by setting the HTTP Cache-Control header&#8217;s max-age property.</p>
</dd>
<dt class="hdlist1"><code>grails.cors.enabled</code></dt>
<dd>
<p><em>boolean</em>&#8201;&#8212;&#8201;Enables Cross-Origin Resource Sharing (CORS) support to allow cross-domain AJAX requests to the application.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_security_settings">6.3. Security settings</h3>
<div class="paragraph">
<p>The <code>security</code> section of the <code>application.yml</code> file contains additional configuration for Spring Security. Please see the Spring Security documentation for details.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">security:
    basic:
        enabled: false</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>security.basic.enabled</code></dt>
<dd>
<p><em>boolean</em>&#8201;&#8212;&#8201;Enables basic HTTP username and password authentication. Disabled by default in the form-based login security example.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_hibernate_settings">6.4. Hibernate settings</h3>
<div class="paragraph">
<p>The <code>hibernate</code> section of the <code>application.yml</code> file contains the configuration for the Hibernate data access layer.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">hibernate:
    cache:
        queries: false
        use_second_level_cache: false
        use_query_cache: false</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quartz_settings">6.5. Quartz settings</h3>
<div class="paragraph">
<p>The <code>quartz</code> section of the <code>application.yml</code> file contains the configuration for the Quartz job scheduler.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">quartz:
    autoStartup: false
    jdbcStore: false</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_sources_settings">6.6. Data Sources settings</h3>
<div class="paragraph">
<p>The <code>dataSource</code> section of the <code>application.yml</code> file contains the connection configuration for the application database.</p>
</div>
<div class="paragraph">
<p>Please see <a href="#database-setup">[database-setup]</a> for additional details.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">dataSource:
    dbCreate: none
    url: jdbc:postgresql://localhost:5432/owf
    driverClassName: org.postgresql.Driver
    username: owf
    password: owf

    properties:
        jmxEnabled: true
        initialSize: 5
        maxActive: 50
        minIdle: 5
        maxIdle: 25
        maxWait: 10000
        maxAge: 600000
        timeBetweenEvictionRunsMillis: 5000
        minEvictableIdleTimeMillis: 60000
        validationQuery: SELECT 1
        validationQueryTimeout: 3
        validationInterval: 15000
        testOnBorrow: true
        testWhileIdle: true
        testOnReturn: false
        jdbcInterceptors: ConnectionState
        defaultTransactionIsolation: 2 # TRANSACTION_READ_COMMITTED</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_server_settings">6.7. Server settings</h3>
<div class="paragraph">
<p>The <code>server</code> section of the <code>application.yml</code> file contains the configuration for the web server, such as port, context path, and SSL settings.</p>
</div>
<div class="paragraph">
<p>In the provided example <code>application.yml</code> file, the <code>server</code> section may be found under the top-level <code>environments</code> section.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Some of these settings may be handled by the host web server or application container. Please see the web server documentation for details.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">server:
    port: 8443
    contextPath: "/owf"
    ssl:
        enabled: true
        protocol: "TLS"
        client-auth: "want"
        key-store: "./certs/keystore.jks"
        key-store-password: "changeit"
        trust-store: "./certs/keystore.jks"
        trust-store-password: "changeit"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_owf_settings">6.8. OWF settings</h3>
<div class="paragraph">
<p>The <code>owf</code> section of the <code>application.yml</code> file contains the settings specific to the OWF application.</p>
</div>
<div class="sect3">
<h4 id="_help_settings">6.8.1. Help settings</h4>
<div class="paragraph">
<p>When a user clicks the question mark button in the toolbar, OWF offers online help:</p>
</div>
<div class="paragraph">
<p>Out of the bundle, the Help window contains:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Instructions for Configuring Help</p>
</li>
<li>
<p>Keyboard Navigation Shortcuts</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_changing_the_location_of_help_files">6.8.1.1. Changing the location of help files</h5>
<div class="paragraph">
<p>The help directory location is defined by the <code>owf.external.helpPath</code> property in <code>application.yml</code>.</p>
</div>
<div class="paragraph">
<p>By default, help files are located on the classpath in the <code>/ozone/framework/help/</code> directory. In the default Tomcat bundle, this may be found at <code>/tomcat/lib/ozone/framework/help/</code>.</p>
</div>
<div class="paragraph">
<p>To change the directory location, replace <code>classpath:ozone/framework/help</code> with a location in one of the following supported formats, then restart the server:</p>
</div>
<div class="paragraph">
<p><strong>Formats:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>classpath:ozone/framework/help</code>&#8201;&#8212;&#8201;An absolute path to a directory on the file system.</p>
</li>
<li>
<p><code>file:/ozone/framework/help</code>&#8201;&#8212;&#8201;A relative path to a directory in the classpath root (for example, <code>/tomcat/lib/</code>)</p>
</li>
<li>
<p><code>ozone/framework/help</code>&#8201;&#8212;&#8201;A path of a resource directory within the OWF WAR file</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">owf:
    external:
        helpPath: "classpath:ozone/framework/help"</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_custom_help_file_types">6.8.1.2. Custom Help file types</h5>
<div class="paragraph">
<p>Only files in the <code>helpPath</code> directory with specific file extensions will appear in the user interface. By default, files with the following file extensions will appear: <code>HTM</code>, <code>HTML</code>, <code>GSP</code>, <code>JSP</code>, <code>PDF</code>, <code>DOC</code>, <code>DOCX</code>, <code>MOV</code>, <code>MP4</code>, and <code>WMV</code>.</p>
</div>
<div class="paragraph">
<p>To modify the file types that will appear in the Help window, change the <code>owf.helpFileRegex</code> property (in regular expression format) in the <code>application.yml</code> file. The administrator must restart the server after the value is updated.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">owf:
    helpFileRegex: '^.*\.(htm|html|gsp|jsp|pdf|doc|docx|mov|mp4|wmv)$'</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_notification_settings">6.8.2. Notification settings</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The Notification feature is no longer maintained. The steps below are for reference purposes only.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The OWF Notifications system connects an OWF and Store to an XMPP server through which it can receive information about Widgets. This feature was originally designed to be used by administrators to monitor the change logs of Store listings, but may be used to allow any Widgets to communicate with OWF users. Widgets that connect to this XMPP server can use it to publish notification messages for consumption by OWF users. Messages published to the chat room must follow a specific format that designates both the message content and the OWF usernames of the intended recipient users. The OWF server will then receive the messages from the chat room and distribute them to individual users.</p>
</div>
<div class="paragraph">
<p>To configure OWF to use notifications, follow these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a chat room on an XMPP server that serves as a repository for alerts to/from OWF and the Store, respectively.</p>
</li>
<li>
<p>Create user accounts on the XMPP server for the Store and OWF servers.</p>
</li>
<li>
<p>Use the XMPP server information to populate the XMPP Settings in the <code>notifications</code> section of <code>application.yml</code> defined below:</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Use the user accounts and their passwords from step two as the Username and Password fields on the Notifications configurations in OWF and the Store.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Notification settings</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">notifications:
    enabled: false
    query.interval: 30

    xmpp:
        username: ''
        password: ''
        host: ''
        room: ''
        port: 5222</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>notifications.enabled</code></dt>
<dd>
<p><em>boolean</em>&#8201;&#8212;&#8201;Turn on or turn off notifications.</p>
</dd>
<dt class="hdlist1"><code>notifications.query.interval</code></dt>
<dd>
<p><em>number</em>&#8201;&#8212;&#8201;How often OWF fetches new notifications.</p>
</dd>
<dt class="hdlist1"><code>notifications.xmpp.username</code></dt>
<dd>
<p><em>string</em>&#8201;&#8212;&#8201;The domain name for the XMPP server that administers notifications.</p>
</dd>
<dt class="hdlist1"><code>notifications.xmpp.password</code></dt>
<dd>
<p><em>string</em>&#8201;&#8212;&#8201;The domain password for the XMPP server that administers notifications.</p>
</dd>
<dt class="hdlist1"><code>notifications.xmpp.host</code></dt>
<dd>
<p><em>string</em>&#8201;&#8212;&#8201;The hostname of the XMPP server.</p>
</dd>
<dt class="hdlist1"><code>notifications.xmpp.room</code></dt>
<dd>
<p><em>string</em>&#8201;&#8212;&#8201;The XMPP chat room that receives notifications.</p>
</dd>
<dt class="hdlist1"><code>notifications.xmpp.port</code></dt>
<dd>
<p><em>number</em>&#8201;&#8212;&#8201;The TCP port the XMPP server uses.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_custom_data_guard_and_widget_security">6.8.3. Custom Data Guard and Widget Security</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The Data Guard feature is no longer maintained. The steps below are for reference purposes only.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>OWF 7.1 enhanced widget security with a data guard system that addresses widget security in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Restricts messages between widgets based on their access levels. Disabled by default; to activate the feature, set <code>restrictMessages</code> to <code>true</code>.</p>
</li>
<li>
<p>Audits all messages between widgets. To enable this feature, ensure that <code>restrictMessages</code> is set to <code>true</code>, then set the <code>auditAllMessages</code> to <code>true</code>.</p>
</li>
<li>
<p>Restricts widgets ability to send messages until their access level is specified. To enable this feature, ensure that <code>restrictMessages</code> is set to <code>true</code>, then change <code>allowMessagesWithoutAccessLevel</code> to <code>false</code>.</p>
</li>
<li>
<p>Specifies the amount of time the system allows to cache a widget&#8217;s access level. To modify the duration, ensure that <code>restrictMessages</code> is set to <code>true</code> and quantify the <code>accessLevelCacheTimeout</code> in milliseconds.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To change this format, update the respective properties in <code>application.yml</code>:</p>
</div>
<div class="listingblock">
<div class="title">Example: Data Guard settings</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">dataguard:
  # Option to restrict messages between widgets based on access levels.
  # If this option is set to false, all other dataguard options are ignored.
  restrictMessages: false

  # Option to audit all messages between widgets, not just failed messages.
  # restrictMessages must be set to true
  auditAllMessages: false

  # Option to allow widgets to send messages without specifying their access level.
  # restrictMessages must be set to true
  allowMessagesWithoutAccessLevel: true

  # The amount of time (in milliseconds) to cache a widget's access level.
  # restrictMessages must be set to true
  accessLevelCacheTimeout: 3600000</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_store_synchronization_settings">6.8.4. Store Synchronization settings</h4>
<div class="paragraph">
<p>The synchronization feature allows the Store to automatically send Widgets and their subsequent updates to OWF. Synchronization is also necessary to push OWF applications to the Store. To use this feature, developers must do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configure application.yml to accept synchronization messages from the Store.</p>
</li>
<li>
<p>Configure security.xml for both OWF and the Store. (see below)</p>
</li>
<li>
<p>Synchronize the OWF server with the Store through the Store&#8217;s Administration Configuration pages.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To implement the synchronization feature with the OWF sample security plugin, configure the following security.xml files for OWF and the Store:</p>
</div>
<div class="paragraph">
<p>OWF – /tomcat/lib/ozone/framework/security/security.xml:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following to the top-level &lt;beans&gt; element:<br>
<code>&lt;sec:http pattern="/marketplace/sync/" security="none" /&gt;</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Store – /tomcat/lib/ozone/marketplace/security/security.xml:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following to the top-level &lt;beans&gt; element:<br>
<code>&lt;sec:http pattern="/public/descriptor/" security="none" /&gt;</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Store will only synchronize with OWF servers linked to that Store. The Store will not synchronize with unspecified OWF systems or offline OWF systems. Synchronize OWF servers with the Store through the Store Administration Configuration pages. For more information, see the <strong>OZONE Store Administrator&#8217;s Guide</strong>.</p>
</div>
<div class="sect4">
<h5 id="_automatically_add_the_store_listings_and_updates">6.8.4.1. Automatically add the Store listings and updates</h5>
<div class="paragraph">
<p>The Marketplace Synchronization feature allows OWF administrators to automatically receive Widgets and their updates from the Store.</p>
</div>
<div class="paragraph">
<p>The synchronization feature is disabled by default. When enabled, OWF compatible listings are directly added from the Store to the Widget Manager in OWF.</p>
</div>
<div class="paragraph">
<p>To enable this feature, edit the following property values in application.yml as indicated in the table.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>mpSync.autoCreateWidget</code></dt>
<dd>
<p><em>boolean</em>&#8201;&#8212;&#8201;Whether new Store listings are automatically added to OWF.</p>
</dd>
<dt class="hdlist1"><code>mpSync.enabled</code></dt>
<dd>
<p><em>boolean</em>&#8201;&#8212;&#8201;Whether OWF will process listing requests from the Store. Set this to <code>true</code> to receive listings and updates from the Store.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Updates from the Store will overwrite any changes made to the corresponding widgets in OWF.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When <code>mpSync.autoCreateWidget</code> is <code>true</code>, OWF automatically adds Widgets to the Widget Manager that have the following listing criteria in the Store:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type is <code>App Component</code></p>
</li>
<li>
<p>Listing status is <code>Approved</code></p>
</li>
<li>
<p>Listing is <code>Enabled</code></p>
</li>
<li>
<p>A State that has "Is Published" set to <code>true</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Initially, the added Widgets are not associated with users or groups. However, users or administrators can see and add them from the Store. Administrators will not automatically receive all OWF compatible Widgets when they sign into OWF. Only new and updated Store listings that meet the criteria described above will automatically appear in the Widget Manager after enabling the this feature.</p>
</div>
</div>
<div class="sect4">
<h5 id="_enabling_auto_updates_from_the_store">6.8.4.2. Enabling Auto-Updates from the Store</h5>
<div class="paragraph">
<p>Using synchronization, users and administrators can automatically receive updates for Widgets previously added to OWF through the Store. Store updates will overwrite changes made to the corresponding Widget in OWF. For example, if an administrator adds an Intent to the Widget, the update from the Store will remove this data. To allow Store synchronization in OWF, set the mpSync.enabled property to true in the application.yml file.</p>
</div>
<div class="paragraph">
<p>To disable the synchronization between the Store listings and their OWF counterpart Widgets, set the mpSync.enabled property to false; by default, this property is set to false. Alternatively, disable the listing in the Store or remove the OWF connection from the Store.</p>
</div>
<div class="paragraph">
<p>If a developer chooses not to enable the automatic Widget synchronization, updating a Widget will require the user to delete their existing version of the widget and add the updated Widget from the Store Widget in their OWF.</p>
</div>
</div>
<div class="sect4">
<h5 id="_widget_load_times">6.8.4.3. Widget Load Times</h5>
<div class="paragraph">
<p>Because the speed with which Widgets launch and operate is related to an individual system&#8217;s resources, OWF has implemented ways to track the time between a Widget&#8217;s rendering and the time it is actually ready to be used. The following values can be active at the same time:</p>
</div>
<div class="listingblock">
<div class="title">Example: Widget load times settings</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">owf:
    sendWidgetLoadTimeToServer: true
    publishWidgetLoadTimes: true</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>owf.sendWidgetLoadTimeToServer</code></dt>
<dd>
<p><em>boolean</em>&#8201;&#8212;&#8201;Enable or disable sending Widget load time data to a system log file where it is written and stored.</p>
</dd>
<dt class="hdlist1"><code>owf.publishWidgetLoadTimes</code></dt>
<dd>
<p><em>boolean</em>&#8201;&#8212;&#8201;Enable or disable sending the data to the Widget Log Widget, which may be opened after it is assigned to a user&#8217;s instance of OWF.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_custom_access_alert_settings">6.8.5. Custom Access Alert settings</h4>
<div class="paragraph">
<p>Depending on the individual security requirements where OWF is being deployed, users may be required to agree to the specific terms of a security warning. Deploying a security warning is accomplished via a custom access alert.</p>
</div>
<div class="paragraph">
<p>The default OWF bundle configuration contains example consent notice and user agreements with placeholder text, which may be customized in the <code>owf</code> section of the <code>application.yml</code> file.</p>
</div>
<div class="listingblock">
<div class="title">Example: Access Alert (Consent Notice) settings</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">owf:
    consent:
        enabled: true
        title: "DoD Privacy and Consent Notice"
        nextUrl: "/login"
        details:
            enabled: true
            linkText: "See User Agreement for details."
        message: |-
            You are accessing a U.S. Government (USG) Information System (IS) that is provided for USG-authorized use
            only. By using this IS (which includes any device attached to this IS), you consent to the following conditions:

            * The USG routinely intercepts and monitors communications on this IS for purposes including, but not limited to,
            penetration testing, COMSEC monitoring, network operations and defense, personnel misconduct (PM), law enforcement
            (LE), and counterintelligence (CI) investigations.
            ...</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>owf.consent.enabled</code></dt>
<dd>
<p><em>boolean</em>&#8201;&#8212;&#8201;Enable or disable the display of a custom consent or warning dialog to the user before they are allowed to access OWF.</p>
</dd>
<dt class="hdlist1"><code>owf.consent.title</code></dt>
<dd>
<p><em>string</em>&#8201;&#8212;&#8201;The title text to display on the custom consent or warning banner dialog.</p>
</dd>
<dt class="hdlist1"><code>owf.consent.nextUrl</code></dt>
<dd>
<p><em>string</em>&#8201;&#8212;&#8201;The URL to redirect the user to when they click the Accept button on the dialog.</p>
</dd>
<dt class="hdlist1"><code>owf.consent.details.enabled</code></dt>
<dd>
<p><em>boolean</em>&#8201;&#8212;&#8201;Whether a link should be displayed to another dialog for additional details (for example, a user agreement).</p>
</dd>
<dt class="hdlist1"><code>owf.consent.details.linkText</code></dt>
<dd>
<p><em>string</em>&#8201;&#8212;&#8201;The text to display as the link to the details dialog.</p>
</dd>
<dt class="hdlist1"><code>owf.consent.message</code></dt>
<dd>
<p><em>string</em>&#8201;&#8212;&#8201;The full message to display in the consent or warning dialog. May be formatted using standard Markdown syntax, and the indentation on the left will be removed.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Example: Access Alert details (User Agreement) settings</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">owf:
    agreement:
        title: "User Agreement"
        message: |-
            __STANDARD MANDATORY NOTICE AND CONSENT PROVISION__

            By signing this document, you acknowledge and consent that when you access Department of Defense (DoD) information
            systems:

            You are accessing a U.S. Government (USG) information system (IS) (which includes any device attached to this
            information system) that is provided for U.S. Government authorized use only. You consent to the following
            conditions:

            * The U.S. Government routinely intercepts and monitors communications on this information system for purposes
            ...</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>owf.agreement.title</code></dt>
<dd>
<p><em>string</em>&#8201;&#8212;&#8201;The title text to display on the additional details (e.g. user agreement) dialog.</p>
</dd>
<dt class="hdlist1"><code>owf.agreement.message</code></dt>
<dd>
<p><em>string</em>&#8201;&#8212;&#8201;The full message to display in the additional details. May be formatted using standard Markdown syntax, and the indentation on the left will be removed.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_logout_settings">6.8.6. Logout settings</h4>
<div class="paragraph">
<p>OWF allows users to sign out of OWF in accordance with their instance&#8217;s security plugins. Any modifications made to the URL will take effect when the system is restarted.</p>
</div>
<div class="listingblock">
<div class="title">Example: Logout settings</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">owf:
    logout:
        enabled: true
        url: "/login?out=1"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>owf.logout.enabled</code></dt>
<dd>
<p><em>boolean</em>&#8201;&#8212;&#8201;Enable or disable logging out of OWF using the User menu. (Value is case sensitive; must be true or false)</p>
</dd>
<dt class="hdlist1"><code>owf.logout.url</code></dt>
<dd>
<p><em>string</em>&#8201;&#8212;&#8201;The URL to redirect the user to when they log out.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The security plugin being used must be customized so that the value entered above will work as expected.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_auto_save_settings">6.8.7. Auto Save settings</h4>
<div class="paragraph">
<p>The OWF user interface will automatically save the user&#8217;s dashboard at a configurable time interval. The default is to save every 15 minutes. Any modifications to the default save interval will take effect when the application.yml is saved and the system is restarted.</p>
</div>
<div class="listingblock">
<div class="title">Example: Auto Save settings</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">owf:
    autoSaveInterval: 900000  # 15 minutes</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>owf.autoSaveInterval</code></dt>
<dd>
<p><em>number</em>&#8201;&#8212;&#8201;The interval for saving the user&#8217;s dashboard, in milliseconds.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Auto Save feature will keep the user session alive as long as a dashboard is visible in the browser.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logging">7. Logging</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_logging_configuration">7.1. Logging Configuration</h3>
<div class="paragraph">
<p>Logging can be configured by editing the <code>logback.groovy</code> file which can be found in the <code>/tomcat/webapps/owf/WEB-INF/classes/</code> directory.</p>
</div>
<div class="listingblock">
<div class="title">Example logging configuration file&#8201;&#8212;&#8201;logback.groovy</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">logback.groovy
import java.nio.charset.Charset

// Configuration variables
def LOG_PATH = "./logs"

// Status listener to display changes to the logging configuration
// statusListener(OnConsoleStatusListener)

// Enable periodically scanning the logging configuration for changes
scan("30 seconds")

// Console appender
appender("CONSOLE", ConsoleAppender) {
    encoder(PatternLayoutEncoder) {
        charset = Charset.forName("UTF-8")
        pattern = "%d{yyyy-MM-dd HH:mm:ss.SSS} %level [%logger] %msg%n"
    }
}

// File appender
appender("FILE", RollingFileAppender) {
    append = true
    encoder(PatternLayoutEncoder) {
        charset = Charset.forName("UTF-8")
        pattern = "%d{yyyy-MM-dd HH:mm:ss.SSS} %level [%logger] %msg%n"
    }
    rollingPolicy(TimeBasedRollingPolicy) {
        FileNamePattern = "${LOG_PATH}/ozone-framework_%d.log"
    }
}

// Default root logging level
root(ERROR, ["CONSOLE", "FILE"])

// Logging for the Ozone namespaces -- set to INFO or DEBUG for more verbose logging
logger("ozone", WARN)
logger("org.ozoneplatform", WARN)

// Logging for all AJAX requests
logger("ozone.owf.grails.controllers.RequestLogInterceptor", INFO)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Logback supports configuration using a Groovy Domain Specific Language (DSL) as demonstrated above, as well as traditional XML configuration file.</p>
</div>
<div class="paragraph">
<p>To use an XML file, replace the logback.groovy file in the above path with a file named <code>logback.xml</code>.</p>
</div>
<div class="paragraph">
<p>The configuration options and syntax for the Logback configuration are documented in the Logback manual, listed below.</p>
</div>
<div class="paragraph">
<p><strong>References:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Logback: Manual – <a href="https://logback.qos.ch/manual/index.html" class="bare">https://logback.qos.ch/manual/index.html</a></p>
</li>
<li>
<p>Logback: Groovy Configuration (DSL) – <a href="https://logback.qos.ch/manual/groovy.html" class="bare">https://logback.qos.ch/manual/groovy.html</a></p>
</li>
<li>
<p>Grails v3.3.x: Logging Guide – <a href="https://docs.grails.org/3.3.2/guide/conf.html#logging" class="bare">https://docs.grails.org/3.3.2/guide/conf.html#logging</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="audit-logging">7.2. Audit Logging</h3>
<div class="paragraph">
<p>OWF includes an option to audit all user entry and exit in the system. The OWF Bundle ships with this feature enabled by default. The Audit Log tracks the following types of changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Both successful and unsuccessful sign-in attempts</p>
</li>
<li>
<p>User Sign-out Events:</p>
<div class="ulist">
<ul>
<li>
<p>A user signing out on purpose</p>
</li>
<li>
<p>A session times out</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
References to CAS and OWF must match the settings of the current installation.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_sign_in_events">7.2.1. Sign-in Events</h4>
<div class="paragraph">
<p>A sign-in failure will occur and be recorded in the log if a user has a valid PKI Certificate but the associated username is not registered as a valid user within OWF. A failed sign in produces the following log statement at the info level:</p>
</div>
<div class="listingblock">
<div class="title">Failed sign-in event (INFO)</div>
<div class="content">
<pre>INFO [02/15/2011 15:24:04 -0500] IP: 127.0.0.1 User: testAdmin1 [USER LOGIN]: LOGIN FAILURE - ACCESS DENIED with FAILURE MSG [Login for 'testAdmin1' attempted with authenticated credentials [CERTIFICATE LOGIN]; However, the Provider was not found. Access is DENIED.]</pre>
</div>
</div>
<div class="paragraph">
<p>A failed sign in produces the following log statement at the debug level:</p>
</div>
<div class="listingblock">
<div class="title">Failed sign-in event (DEBUG)</div>
<div class="content">
<pre>DEBUG [02/15/2011 15:27:18 -0500] IP: 127.0.0.1 User: testAdmin1 [USER LOGIN]:LOGIN FAILURE - ACCESS DENIED with FAILURE MSG [Login for 'testAdmin1' attempted with authenticated credentials [CERTIFICATE LOGIN &gt;&gt; Signature Algorithm: [SHA1withRSA, OID = 1.2.840.113549.1.1.5]; Subject: [EMAILADDRESS=testAdmin1@nowhere.com, CN=testAdmin1, OU=Ozone, O=Ozone, L=Columbia, ST=Maryland, C=US]; Validity: [From: Thu Feb 04 13:58:52 EST 2010, To: Sun Feb 03 13:58:52 EST 2013]; Issuer: [EMAILADDRESS=ozone@nowhere.com, CN=localhost, OU=Ozone, O=Ozone, L=Columbia, ST=Maryland, C=US]; ]; However, the Provider was not found. Access is DENIED. Login Exception Message: [No AuthenticationProvider found for org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationToken]]</pre>
</div>
</div>
<div class="paragraph">
<p>A successful PKI Certificate sign in produces the following log statement at the info level:</p>
</div>
<div class="listingblock">
<div class="title">Successful certificate sign-in event (INFO)</div>
<div class="content">
<pre>INFO [02/15/2011 15:39:13 -0500] IP: 127.0.0.1 User: testAdmin1 [USER LOGIN]: LOGIN SUCCESS - ACCESS GRANTED USER [testAdmin1], with DISPLAY NAME [Test Admin 1], with AUTHORITIES [ROLE_ADMIN,ROLE_USER], with ORGANIZATION [Test Admin Organization], with EMAIL [testAdmin1@nowhere.com]with CREDENTIALS [CERTIFICATE LOGIN]</pre>
</div>
</div>
<div class="paragraph">
<p>A successful PKI Certificate sign-in statement produces the following log statement at the debug level:</p>
</div>
<div class="listingblock">
<div class="title">Successful certificate sign-in event (DEBUG)</div>
<div class="content">
<pre>DEBUG [02/15/2011 15:42:10 -0500] IP: 127.0.0.1 User: testAdmin1 [USER LOGIN]:LOGIN SUCCESS - ACCESS GRANTED USER [testAdmin1], with DISPLAY NAME [Test Admin 1], with AUTHORITIES [ROLE_ADMIN,ROLE_USER], with ORGANIZATION [Test Admin Organization], with EMAIL [testAdmin1@nowhere.com] with CREDENTIALS [CERTIFICATE LOGIN &gt;&gt; Signature Algorithm: [SHA1withRSA, OID = 1.2.840.113549.1.1.5]; Subject: [EMAILADDRESS=testAdmin1@nowhere.com, CN=testAdmin1, OU=Ozone, O=Ozone, L=Columbia, ST=Maryland, C=US]; Validity: [From: Thu Feb 04 13:58:52 EST 2010, To: Sun Feb 03 13:58:52 EST 2013]; Issuer: [EMAILADDRESS=ozone@nowhere.com, CN=localhost, OU=Ozone, O=Ozone, L=Columbia, ST=Maryland, C=US]; ]</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_logout_events">7.2.2. Logout Events</h4>
<div class="paragraph">
<p>Sign-out events are logged by the <code>ozone.securitysample.authentication.audit.SecurityAuditLogger</code> logger. This logger supports two levels of logging: <code>info</code> and <code>debug</code>, with the latter providing more detailed information about each sign-out event.</p>
</div>
<div class="paragraph">
<p>Below is a typical user-initiated sign-out event which has been saved as a log entry, with the log level set to info:</p>
</div>
<div class="listingblock">
<div class="title">Sign-out event (INFO)</div>
<div class="content">
<pre>INFO [02/03/2011 16:13:35 -0500] IP: 127.0.0.1 SessionID: 8ki2ttimdxc User: testAdmin1 [USER LOGOUT]:</pre>
</div>
</div>
<div class="paragraph">
<p>Below is a typical user-initiated sign-out event which has been saved as a log entry, with the log level set to debug:</p>
</div>
<div class="listingblock">
<div class="title">Sign-out event (DEBUG)</div>
<div class="content">
<pre>DEBUG [02/03/2011 15:59:53 -0500] IP: 127.0.0.1 SessionID: 1tjefhsxz1x6t User: testUser1 [USER SESSION TIMEOUT] with ID [2], with EMAIL [testUser1@nowhere.com], with ACCOUNT CREATED DATE [02/03/2011 15:58:50 -0500], with LAST LOGIN DATE [02/03/2011 15:58:50 -0500]</pre>
</div>
</div>
<div class="paragraph">
<p>A user can also be forced to sign-out when their session times out. Below are info and debug log statements:</p>
</div>
<div class="listingblock">
<div class="title">Session time-out event (INFO)</div>
<div class="content">
<pre>INFO [02/07/2011 10:08:21 -0500] IP: 127.0.0.1 SessionID: 1b4nvaqnb0qx8 User: testAdmin1 [USER SESSION TIMEOUT]</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Session time-out event (DEBUG)</div>
<div class="content">
<pre>DEBUG [02/07/2011 10:24:21 -0500] IP: 127.0.0.1 SessionID: d0pq3g4xguv3 User: testAdmin1 [USER SESSION TIMEOUT] with ID [1], with EMAIL [testAdmin1@nowhere.com], with ACCOUNT CREATED DATE [02/07/2011 10:23:18 -0500], with LAST LOGIN DATE [02/07/2011 10:23:18 -0500]</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_common_event_format_cef_auditing">7.3. Common Event Format (CEF) Auditing</h3>
<div class="paragraph">
<p>Common Event Format (CEF) auditing capabilities are available in OWF and the Store. The variables used for OWF CEF logging are defined in the application.yml. To enable/disable them, sign into OWF and the Store as an administrator and navigate to the auditing configurations.
CEF auditing is turned ON by default, the toggle controls for both CEF and Object Access auditing are found in OWF&#8217;s Application Configurations which is located on the drop-down User Menu in the user interface. For more information, see the OWF Administrator&#8217;s Guide.</p>
</div>
<div class="paragraph">
<p>When enabled, CEF auditing records common user events:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sign in and out (Sign out - Marketplace only)</p>
</li>
<li>
<p>Create, Read<sup>1</sup>, Edit and Delete</p>
</li>
<li>
<p>Search</p>
</li>
<li>
<p>Import and Export</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><sup>1.</sup> Object Access auditing is a separate CEF auditing feature that records users' Read events. Read events are logged when both the CEF auditing global flag and the Object Access flag are ON in OWF&#8217;s Application Configurations. If the Object Access auditing is ON and the CEF auditing is OFF, no Read events are logged with CEF auditing.</p>
</div>
<div class="paragraph">
<p>CEF auditing and Audit Logging (see <a href="#audit-logging">Section 7.2, &#8220;Audit Logging&#8221;</a>) record overlapping database events (ex. edit, delete and log out events). When CEF auditing is ON, CEF auditing is the recorder of these database events; these events are not recorded with Audit Logging. When CEF is turned OFF, Audit Logging records these database events.</p>
</div>
<div class="paragraph">
<p>The following are two log examples using CEF auditing:</p>
</div>
<div class="listingblock">
<div class="title">CEF auditing from an object modification event</div>
<div class="content">
<pre>26 Jun 2013 12:31:37,217 EDT CEF:0|ORG|MARKETPLACE|500-27_L2::IC::1.3|FILEOBJ_MODIFY|Object was updated|7|cat=FILEOBJ_MODIFY suid=MikePAdmin shost=10.10.16.12 requestMethod=USER_INITIATED outcome=SUCCESS deviceFacility=0CCB5827C819E1A4AC9BE5BD4C6F9FE9.mp02 reason=UNKNOWN cs5=UNKNOWN act=7.2 deviceExternalId=UNKNOWN dhost=amlqa02.goss.owfgoss.org cs4=UNKNOWN start=06:26:2013 12:31:37 [.037]cs3=UNKNOWN fname=[CLASS:marketplace.OwfProperties, stackContext:, stackDescriptor:] filePermission=UNKNOWN fileId=16 fsize=2 fileType=OBJECT oldFilename=[CLASS:marketplace.OwfProperties, stackContext:null, stackDescriptor:null]oldFilePermission=UNKNOWN oldFileId=16 oldFileSizesize=2 oldFileType=OBJECT</pre>
</div>
</div>
<div class="listingblock">
<div class="title">CEF auditing from a log-on event</div>
<div class="content">
<pre>26 Jun 2013 08:57:51,974 EDT CEF:0|ORG| MARKETPLACE L|500-27_L2::IC::1.3|LOGON|A logon event occured.|7|cat=LOGON suid=MikePAdmin shost=10.10.16.12 requestMethod=USER_INITIATED outcome=SUCCESS deviceFacility=8C24A08B7E9848C80F929791DA40F734.mp02 reason=UNKNOWN cs5=UNKNOWN act=7.2 deviceExternalId=UNKNOWN dhost=amlqa02.goss.owfgoss.org cs4=UNKNOWN start=06:26:2013 08:57:51 [.051]cs3=UNKNOWN</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="upgrading">8. Upgrading</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_upgrading_from_version_7_17_1_0">8.1. Upgrading from version 7.17.1.0</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Before starting the upgrade, backup the corresponding database previously used with OWF 7.17.1.0 as well as all custom override configuration files (In Tomcat, they are normally located in the <code>/tomcat/lib/</code> directory)</p>
<div class="paragraph">
<p>For this upgrade, you can use your database used in OWF 7.17.1.0 with no alterations necessary.</p>
</div>
<div class="paragraph">
<p>Please see <a href="#configuration">Chapter 6, <em>Configuration</em></a> for any questions regarding configuration files.</p>
</div>
</li>
<li>
<p>Install OWF</p>
<div class="listingblock">
<div class="content">
<pre>cp ozone-framework-8.0.0.0.zip /opt
cd /opt
unzip ozone-framework-8.0.0.0.zip
cd tomcat</pre>
</div>
</div>
</li>
<li>
<p>Make any configuration changes needed in <code>application.yml</code> configuration file, located in the bundle in the <code>/tomcat/lib/ozone/framework/</code> directory.</p>
</li>
<li>
<p>Completing the upgrade</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Reconfigure and re-apply customizations in the <code>/tomcat/lib/</code> directory</p>
</li>
<li>
<p>If a custom keystore was deployed in a previous build, the keystore for OWF will need to be manually configured in the same manner.</p>
</li>
<li>
<p>Copy any custom certificates from previous build to OWF v8.0.0.0. Usually this is found in <code>/tomcat/certs/</code>.</p>
</li>
<li>
<p>Upgrade is now complete</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_connecting_to_omp_marketplace">8.2. Connecting to OMP (Marketplace)</h3>
<div class="paragraph">
<p>In order to the connect your OMP Marketplace (v7.17.X.X) with OWF v8.0.0.0, you must modify the following files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>application.properties</code></p>
<div class="ulist">
<ul>
<li>
<p>Make sure the following versions match the version numbers of the respective items in owf-framework-server.</p>
<div class="listingblock">
<div class="content">
<pre>app.base.version=8.0.0.0
tomcat.custom.rev=1.2.3-0</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>build.gradle</code></p>
<div class="ulist">
<ul>
<li>
<p>Make sure the following versions match the version numbers of the respective items in owf-framework-server.</p>
<div class="listingblock">
<div class="content">
<pre>mavenBom 'org.ozoneplatform:ozone-classic-bom:7.17.2-0'
customTomcat(group: 'org.ozoneplatform', name: 'owf-custom-tomcat', version: '1.2.3-0')</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>grails-app/conf/application.yml</code></p>
<div class="ulist">
<ul>
<li>
<p>Add URLs of all Ozone instances that will be using this store to the <code>allowedOrigins</code>, e.g.:</p>
<div class="listingblock">
<div class="content">
<pre>cors:
    allowedOrigins:
    - http://localhost:3000
    - https://192.168.1.2:8000

# Set the port for OMP to run on.
production:
    server:
        port: 8444</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>src/main/resources/ozone/marketplace/security.xml</code></p>
<div class="ulist">
<ul>
<li>
<p>Add URLs of all Ozone instances that will be using this store to the <code>allowedOrigins</code>, e.g.:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;sec:header name="Content-Security-Policy" value="frame-ancestors
        http://localhost:3000/
        https://192.168.1.2:3000/
"/&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Restart your application</p>
</li>
<li>
<p>See Administration Guide on how to add stores to application</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deployment">9. Deployment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_operating_owf_from_differentmultiple_ports">9.1. Operating OWF From Different/Multiple Ports</h3>
<div class="paragraph">
<p>Initial OWF configuration is set up so that Tomcat can be run from a local installation. Throughout this document, <code>servername:port</code> implies a <code>localhost:8080</code> or <code>localhost:8443</code> location. The example below shows how to set up OWF so that it can be used on 5050/5443.</p>
</div>
<div class="paragraph">
<p>To enable ports other than 8080/8443, the desired ports need to be explicitly edited in the Web server configuration file: <code>/tomcat/conf/server.xml</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the event that OWF is running on a server where a port number is already in use, OWF must run from a different port number. Two applications cannot bind to the same port.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>For example, in Tomcat, change the port numbers in <code>/tomcat/conf/server.xml</code>, as shown below to the following port number:<br></p>
<div class="listingblock">
<div class="title">Example: server.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;Connector port="5050"
           protocol="HTTP/1.1"
           connectionTimeout="20000"
           redirectPort="5443" /&gt;

&lt;Connector port="5443"
           protocol="HTTP/1.1"
           SSLEnabled="true"
           maxThreads="150"
           scheme="https"
           secure="true"
           keystoreFile="certs/keystore.jks"
           keystorePass="changeit"
           clientAuth="false"
           sslProtocol="TLS" /&gt;</code></pre>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Ports 5050 and 5443 are just examples and can be changed to whatever is needed. If OWF was running on a server where a port number was already in use, the shutdown port must also be changed. To do this, change the port number in the Tomcat Web server configuration file <code>/tomcat/conf/server.xml</code> to another port, in the following example the default shutdown port was changed from 8005 to 8006:<br></p>
<div class="listingblock">
<div class="title">Example: server.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;Server port="8006" shutdown="SHUTDOWN"&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Restart the OWF server.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_adding_the_store_to_owf">9.2. Adding the Store To OWF</h3>
<div class="paragraph">
<p>The flexible and scalable nature of OWF allow for applications used in concert (such as the Store) to be included in Ozone&#8217;s deployment. This allows a user to develop with the products working together, without having to activate multiple ports via configuration.</p>
</div>
<div class="paragraph">
<p>To include the Store in the Ozone bundle, do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Unpack the zipped bundles containing the applications to be included.</p>
</li>
<li>
<p>Navigate to <code>/tomcat/webapps/</code> in each unpacked bundle.</p>
</li>
<li>
<p>Copy the appropriate WAR files into the <code>/tomcat/webapps/</code> directory where Ozone was deployed.</p>
</li>
<li>
<p>Copy the additional applications' configuration files into <code>/tomcat/lib/</code> where Ozone was deployed. For the Store, the configuration file is <code>application.yml</code>.</p>
</li>
<li>
<p>Restart the Ozone server.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_server_certificate_creation_and_installation">9.3. Server Certificate Creation and Installation</h3>
<div class="paragraph">
<p>Valid server certificates are needed for configuring the server to allow HTTPS authentication.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Self-signed certificates will produce warnings in a user&#8217;s browser. This is because a self-signed certificate, not signed by a recognized certificate authority, has no one authorizing its validity. In a production environment, certificates should be signed by a recognized certificate authority, such as an organization&#8217;s internal certificate authority.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_generating_a_new_self_signed_server_certificate">9.3.1. Generating a New Self-Signed Server Certificate</h4>
<div class="paragraph">
<p>A new self-signed certificate can be generated by navigating to the tools directory and executing <code>create-certificates.bat</code> or <code>.sh</code>, depending on the operating system in use.</p>
</div>
<div class="paragraph">
<p>Follow the on-screen prompts and create the necessary certificates for the installation.</p>
</div>
<div class="paragraph">
<p>Make sure to enter the FULLY QUALIFIED server name. This needs to match the domain name of the machine exactly or the certificate will not work correctly.</p>
</div>
<div class="paragraph">
<p>If using an IP address as the Common Name (CN), an entry must be added to the Subject Alternative Name entry in the certificate. The better alternative to using an IP address is to add a name/IP pair to the hosts file and register the name as the CN.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_ozone_for_a_different_truststorekeystore">9.3.2. Configuring Ozone For a Different Truststore/Keystore</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>For server-to-server calls (Ozone-to-CAS communications, for example) the newly created self-signed certificate should be imported into the truststore. If the truststore is a separate file from the keystore, the certificate can be copied from the keystore to the truststore as follows:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Export the certificate from the keystore into a file:<br></p>
<div class="listingblock">
<div class="content">
<pre>keytool -export -file servername.crt -keystore servername.jks -alias servername</pre>
</div>
</div>
</li>
<li>
<p>Import the file into the Truststore:<br></p>
<div class="listingblock">
<div class="content">
<pre>keytool -import -alias servername –keystore mytruststore.jks -file servername.crt</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Modify the JVM Parameters that are used to start the web application server in order to use the new truststore shown above. If a Tomcat server is being used, the parameters can be found in the setenv.bat (or .sh, depending on the operating system in use) script found within the /tomcat/bin/ directory inside of the unpacked owf-bundle-8.0.0.0.zip. If an application server other than Tomcat is being used, the parameters will need to be added to the JVM parameters which are loaded when the application server is started.<br></p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Custom JVM Parameters</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.net.ssl.keyStore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"%CATALINA_HOME%/certs/keystore.jks"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replace <code>certs/keystore.jks</code> with the path and filename to the keystore.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.net.ssl.trustStore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"%CATALINA_HOME%/certs/keystore.jks"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replace <code>certs/keystore.jks</code> with the path of the truststore (may be the same as the keystore).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.net.ssl.keyStorePassword</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changeit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replace <code>changeit</code> with the keystore&#8217;s password (if applicable)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.net.ssl.trustStorePassword=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changeit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replace <code>changeit</code> with the truststore&#8217;s password.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Finally, the server configuration must be modified to use the new KeyStore/Truststore in SSL. Below is the
relevant section from the Tomcat configuration script found in <code>/tomcat/conf/server.xml</code>:<br></p>
<div class="listingblock">
<div class="title">Example: server.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;Connector port="8443"
           protocol="HTTP/1.1"
           SSLEnabled="true"
           maxThreads="150"
           scheme="https"
           secure="true"
           keystoreFile="certs/keystore.jks"
           keystorePass="changeit"
           truststoreFile="certs/truststore.jks"
           truststorePass="changeit"
           clientAuth="want"
           sslProtocol="TLS" /&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_security_modules">Appendix A: Custom Security Modules</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_requirements_for_customizing_security">A.1. Requirements for Customizing Security</h3>
<div class="paragraph">
<p>The Spring Security Framework allows individual deployments to customize the OWF authentication and authorization mechanism. Developers can use the security plugin to integrate with any available enterprise security solutions. When customizing the security plugin, it is important to remember OWF/Store requirements for the plugin. These five requirements are described in this section.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The requirements for OWF and the Store are in addition to any general Web application requirements relating to Spring Security.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User principal implements the <code>UserDetails</code> interface and (optionally) the <code>OWFUserDetails</code> interface.<br></p>
<div class="paragraph">
<p>Like all Spring Security Web applications, OWF expects its security plugin to provide a UserDetails object which represents the logged-in user. A custom plugin should set this object as the principal on the <code>Authentication</code> object stored within the active <code>SecurityContext</code>. Optionally, the provided object may implement the <code>OWFUserDetails</code> interface. In addition to the fields supported by the <code>UserDetails</code> interface, the <code>OWFUserDetails</code> interface supports access to the user&#8217;s OWF display name, organization and email. The source code for <code>OWFUserDetails</code> can be found in the <code>owf-security</code> project repository.</p>
</div>
</li>
<li>
<p><code>ROLE_USER</code> granted to all users.<br></p>
<div class="paragraph">
<p>The user principal object&#8217;s <code>getAuthorities()</code> method must return a collection that includes the ROLE_USER GrantedAuthority.</p>
</div>
</li>
<li>
<p>ROLE_ADMIN granted to OWF administrators.<br></p>
<div class="paragraph">
<p>The user principal object&#8217;s <code>getAuthorities()</code> method must return a collection that includes the <code>ROLE_ADMIN</code> <code>GrantedAuthority</code> if the user is to have administrative access.</p>
</div>
</li>
<li>
<p>OZONELOGIN cookie set when the user signs in and deleted on sign out.<br></p>
<div class="paragraph">
<p>The user interface performs a check for the existence of a cookie named <code>OZONELOGIN</code> during the page load. If the cookie does not exist, the interface will not load, but will instead present a message indicating that the user is not signed in. It is up to the security plugin to create this cookie when the user signs in, and to delete it when they sign out. This mechanism prevents users from signing out, and then pressing the browser&#8217;s Back button to get back into an OWF instance that cannot communicate with the server due to failed authentication. The sample security plug-in configurations contain filters that manage this process. It is recommended that custom configurations include this default implementation of the cookie behavior by using the same <code>ozoneCookieFilter</code> beans that are included in the sample configuration.</p>
</div>
</li>
<li>
<p>Session management configurations must be present.<br></p>
<div class="paragraph">
<p>These configurations include the <code>concurrencyFilter</code> bean, the <code>concurrentSessionControlStrategy</code> bean, the <code>sessionRegistry</code> bean as well as a <code>&lt;session-management&gt;</code> element and a <code>&lt;custom-filter&gt;</code> element which references the <code>concurrencyFilter</code>. It is important not to change the id of the <code>concurrentSessionControlStrategy</code>, as it is referenced by id from within the application.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>maximumSessions</code> setting contained in the XML configuration will be overwritten at runtime, since the maximum number of sessions is configured in the Application Configuration UI.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_custom_security_classes">A.2. Custom Security Classes</h3>
<div class="sect3">
<h4 id="_owfuserdetails">A.2.1. OWFUserDetails</h4>
<div class="paragraph">
<p><em>Package: <code>ozone.security.authentication</code></em></p>
</div>
<div class="paragraph">
<p>This interface defines interactions for a data model that OWF requires in order to handle OWF user groups. Using an implementation of this interface (and implementations may vary) will ensure that OWF user groups work.</p>
</div>
<div class="paragraph">
<p>This interface extends the <code>UserDetails</code> interface as defined by Spring Security.</p>
</div>
<div class="paragraph">
<p>Please refer to the Spring Security API documentation for more details regarding the <code>UserDetails</code> interface: <a href="https://docs.spring.io/autorepo/docs/spring-security/4.0.0.RELEASE/apidocs/org/springframework/security/core/userdetails/UserDetails.html" class="bare">https://docs.spring.io/autorepo/docs/spring-security/4.0.0.RELEASE/apidocs/org/springframework/security/core/userdetails/UserDetails.html</a>.</p>
</div>
<div class="listingblock">
<div class="title">OWFUserDetails.java</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ozone.security.authentication;

public interface OWFUserDetails extends UserDetails {

    public Collection&lt;OwfGroup&gt; getOwfGroups();

    public String getDisplayName();

    public String getOrganization();

    public String getEmail();

}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_owfuserdetailsimpl">A.2.2. OWFUserDetailsImpl</h4>
<div class="paragraph">
<p><em>Package: <code>ozone.security.authentication</code></em></p>
</div>
<div class="paragraph">
<p>This class is a sample implementation of the <code>OWFUserDetails</code> interface. It is not mandatory to use this implementation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a custom implementation is written, authorities must be write-accessible; create a <code>setAuthorities</code> method.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_owfgroup">A.2.3. OWFGroup</h4>
<div class="paragraph">
<p><em>Package: <code>ozone.security.authorization.target</code></em></p>
</div>
<div class="paragraph">
<p>This interface describes a single OWF user group. A group is a way of collecting OWF users and being able to assign widgets and other behaviors to them collectively:</p>
</div>
<div class="listingblock">
<div class="title">OwfGroup.java</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ozone.security.authorization.target;

public interface OwfGroup {

    public String getOwfGroupName();

    public String getOwfGroupDescription();

    public String getOwfGroupEmail();

    public boolean isActive();

}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_owfgroupimpl">A.2.4. OwfGroupImpl</h4>
<div class="paragraph">
<p><em>Package: <code>ozone.security.authorization.model</code></em></p>
</div>
<div class="paragraph">
<p>This class implements the <code>OwfGroup</code> interface. It can be used as-is in a security implementation, or one can be created as needed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_grantedauthorityimpl">A.2.5. GrantedAuthorityImpl</h4>
<div class="paragraph">
<p><em>Package: <code>ozone.security.authorization.model</code></em></p>
</div>
<div class="paragraph">
<p>This class implements the Spring Security interface <code>GrantedAuthority</code>. It can be used as-is in a security implementation, or one can be created as needed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mydetailsservice">A.2.6. MyDetailsService</h4>
<div class="paragraph">
<p><em>Package: <code>ozone.securitysample.authentication.basic</code></em></p>
</div>
<div class="paragraph">
<p>This class is a sample implementation of the Spring Security <code>UserDetailsService</code>. It reads user authentication and authorization details (username, password, roles, and groups) from the <code>users.properties</code> file.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This is intended only to be used in testing and development environments. The usernames and passwords are stored in plain-text, creating a severe security risk for any production environment.<br>
For a production deployment, a custom implementation of the UserDetailsService should be used. For example, the user&#8217;s details may be retrieved from an external service such as LDAP.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_glossary">Glossary</h2>
<div class="sectionbody">
<div class="dlist glossary">
<dl>
<dt>Accordion (layout)</dt>
<dd>
<p>Display widgets in equal, horizontal panes that do not scroll (each individual widget may scroll using its own scroll bar).</p>
</dd>
<dt>Affiliated Store</dt>
<dd>
<p>A store that another organization uses for their system. When a local store is connected to an affiliated store, users in the local store can search for and add listings from the affiliated store (assuming the user has proper authentication for the affiliated store).</p>
</dd>
<dt>App</dt>
<dd>
<p>Deprecated term for a Stack.</p>
</dd>
<dt>App Component</dt>
<dd>
<p>Deprecated term for a widget.</p>
</dd>
<dt>Dashboard</dt>
<dd>
<p>An organized collection of widgets with a customizable layout.</p>
</dd>
<dt>Filters</dt>
<dd>
<p>A feature used to reduce the number of search results by type or category.</p>
</dd>
<dt>Fit (layout)</dt>
<dd>
<p>Allows a user to place a single widget on the screen.</p>
</dd>
<dt>Help</dt>
<dd>
<p>Repository of instructional guides and video tutorials.</p>
</dd>
<dt>Intent</dt>
<dd>
<p>Instructions for carrying out a widget&#8217;s intentions.</p>
</dd>
<dt>Listing</dt>
<dd>
<p>Any software dashboard or widget that a user enters into the Store is called a "Listing." Listings can be a various types of Web content.</p>
</dd>
<dt>Marketplace</dt>
<dd>
<p>A searchable catalog of shared listings of widgets and dashboards (also referred to as the Store).</p>
</dd>
<dt>OWF</dt>
<dd>
<p>Abbreviation for Ozone Widget Framework.</p>
</dd>
<dt>Pages</dt>
<dd>
<p>Deprecated term for a dashboard.</p>
</dd>
<dt>Portal (layout)</dt>
<dd>
<p>A column-oriented layout that organizes widgets of varying heights. Each new widget loads above the first one on the screen. The user drags a dividing bar to specify widget’s height. The widgets and the Ozone window scroll.</p>
</dd>
<dt>Required Listings</dt>
<dd>
<p>An association between Listings. <em>Example: if Listing A needs Listing B to function, Listing B is a Required Listing.</em></p>
</dd>
<dt>Stack</dt>
<dd>
<p>A collection of Dashboards (pages). Allows administrators and users to group Dashboards into folder-like collections that allow for easy transition from one to another.</p>
</dd>
<dt>Store</dt>
<dd>
<p>Commonly used term for the Ozone Marketplace.</p>
</dd>
<dt>Tabbed (layout)</dt>
<dd>
<p>Display one widget per screen, with tabs the top of the screen to switch from one widget to another.</p>
</dd>
<dt>Toolbar</dt>
<dd>
<p>The navigation bar at the top of the application. It links to a user’s stacks, widgets, the Store, online Help and options from the drop-down User Menu.</p>
</dd>
<dt>User</dt>
<dd>
<p>A person signed into the Ozone application, usually referring to a person without administrative privileges.</p>
</dd>
<dt>Widget</dt>
<dd>
<p>A light-weight, single-purpose Web application that offers a summary or limited view of a larger Web application and may be configured by the user and displayed within a Dashboard.</p>
</dd>
<dt>Widget Menu</dt>
<dd>
<p>The Widgets Menu displays all available widgets. Use this feature to start or add widgets to a dashboard.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 8.0.0.0<br>
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>