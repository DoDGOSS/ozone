ifndef::imagesdir[]
:imagesdir: ../images/
endif::[]

== The Ozone Bundle

=== Prerequisites

OWF is normally distributed as a zipped bundle. This bundle contains the two main components needed to deploy, run and develop widgets for the framework. They are as follows:


==== Node.js and NPM

==== Java Runtime Environment (JRE)

Running the OWF bundle requires that the Java Runtime Environment (JRE) be installed on the host machine.

OWF has been developed and fully tested using Java 8. Versions prior to or later than Java 8 are not currently supported.

The full instructions for the installation of the JRE is beyond the scope of this document. However, installation media and instructions may be obtained from the Oracle Java download page at the following location:

* http://www.oracle.com/technetwork/java/javase/downloads/index.html


=== Instructions

==== Overview

NOTE: The following is a summary. Please refer to the sections below for extended details.

. Unzip the zipped OWF bundle.
. From a command-line, start the bundle +
  `owf-framework-8.X.X.X/tomcat/start.sh --dev` +
  or +
  `owf-framework-8.X.X.X/tomcat/start.bat /dev`
. In a supported browser, navigate to: https://localhost:8443/owf/
. Authenticate access to OWF by entering username `testAdmin1` and password `password`


==== Unzipping the bundle

A user can start the OWF server by unpacking the OWF bundle into the directory from where it will be run, and activating the start script. This requires the use of a ZIP utility. Detailed steps for each operation are shown below.

.Example (Linux)
----
mkdir /opt/owf-framework
cp owf-framework-8.X.X.X.zip /opt/owf
cd /opt/owf
unzip owf-framework-8.X.X.X.zip
----

The following example shows how an administrator might unpack OWF from the bundle on Windows operating systems:

. Right-click on the OWF bundle.
. Using a ZIP utility, select "Extract to [folder name]." +
  If the ZIP utility does not support this feature, manually create a sub-directory and extract the ZIP contents into that directory.


==== Starting OWF

Scripts to start the server are included in the bundle in the tomcat directory.

The server may be started in development mode to utilize the embedded, in-memory H2 database. The initial data is generated by the application.

To run the server in production mode, the database must be pre-populated with the initial data using the supplied database scripts. Please refer to the OWF Configuration Guide for instructions on configuring the database and running the initial data scripts.


===== Windows start script

.Example:
----
C:\owf-framework-8.X.X.X\tomcat> start.bat /dev
----

.Usage:
----
start.bat [/dev] [/db database]
  /dev       Start in DEVELOPMENT mode
  /db        Use the selected database configuration
  database     h2     - Embedded H2 file-based database (default)
               pg     - PostgreSQL
               mysql  - MySQL
               oracle - Oracle RDBMS
               mssql  - Microsoft SQL Server
----


===== Linux start script

.Example:
----
/owf-framework-8.X.X.X/tomcat$ ./start.sh --dev
----

.Usage:
----
./start.sh [--dev] [--db database]
  --dev      Start in DEVELOPMENT mode
  --db       Use the selected database configuration
  database      h2     - Embedded H2 file-based database (default)
                pg     - PostgreSQL
                mysql  - MySQL
                oracle - Oracle RDBMS
                mssql  - Microsoft SQL Server
----


==== Accessing OWF

After the backend server has finished the initialization process, and the frontend is being served, OWF can be accessed by opening a web browser and navigating to the following URL:

* https://localhost:8443/owf/


=== Authenticating to OWF

In development mode, no login is required and a default profile will be used.

In production mode, users must be authenticated by the system before they can access OWF services.

In the default installation, the user may authenticate by using the default login form using a username and password.


==== Using the login form

To login as the default administrator, use the following credentials at the login form:

* username: `testAdmin1`
* password: `password`

To login as a default unprivileged user, use the following credentials at the login form:

* username: `testUser1`
* password: `password`


==== Certificate authentication

If the system is configured for certificate-based (X509/PKI) authentication, sample user certificates are provided and must installed in the user's browser.  These certificates can be found under the tomcat/certs/ directory where the OWF bundle was deployed. See screenshots on the pages that follow for general instructions on importing certificates.

NOTE: The password for the user certificate is `password`.


===== Installing a user certificate using Internet Explorer (IE)

. Navigate to Tools → Internet Options → Content → Certificates → Personal.
. Click the Import button and navigate to the /tomcat/certs directory where the OWF bundle was deployed.
. Select the testUser1 certificate and click OK.
. Click Next and enter `password` as the password when prompted.
. Select a folder to house the certificate.
. Click Finish.
. A dialog box should display, stating that the import was successful.

NOTE: #1 -- In certain versions of Internet Explorer, certificate/connection failures are shown, despite a successful import of the testUser1 certificate. If this is the case, follow the directions above and select the X.509 from the drop-down and import the certificate titled ca.crt. +
 +
#2 -- The default dialog filter for a particular browser may be set for CER or CRT files. If this is the case, the drop-down for file type must be set for .p12. Once .p12, is selected, the certificate will show up as being available for importing. +
 +
#3 -- Some Intranets may require additional customization.

.Internet Explorer user certificate dialog
image::certificate_ie.png[]


===== Installing a user certificate using Firefox

. Navigate to Tools → Options → Advanced → Encryption → View Certificate → Your Certificates. +
_(Newer versions:  → Options → Advanced → Certificates → View Certificates → Your Certificates.)_

. Click the import button and navigate to the /tomcat/certs directory where the OWF bundle was deployed.
. Select the testUser1 certificate, click OK.
. Enter `password` as the password when prompted.
. Click Finish.
. A dialog box should display, stating that the import was successful.

.Firefox user certificate dialog
image::certificate_firefox.png[]

